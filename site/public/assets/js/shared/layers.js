function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);function a(){}var o=0;return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,d=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){d=!0,n=t},f:function(){try{i||null==r.return||r.return()}finally{if(d)throw n}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}ShiftCodesTK.layers={isLoaded:!1,layerListeners:{},activeLayers:{},layerTimeouts:{focusin:{},focusout:{}},layerEvents:{focus:{true:["mouseover","touchstart","focusin"],false:["mouseleave","mouseout","touchend","focusout","click"]},click:["click","contextmenu"],resync:["resize","scroll","mousemove"]},layerContainer:null,getLayerProps:function(s){try{!function(){if(void 0===s||!s||!dom.has(s,"class","layer"))throw"Provided layer is not a valid layer."}();var n={},t=!!s.id&&this.activeLayers[s.id];return t?n=t:(n.id=s.id,n.name=dom.get(s,"attr","data-layer-name"),n.active=!1,n.type=dom.has(s,"class","dropdown")?"dropdown":dom.has(s,"class","tooltip")?"tooltip":!!dom.has(s,"class","panel")&&"panel",n.triggers=function(){if(e=dom.get(s,"attr","data-layer-triggers")){var t=["focus","primary-click","secondary-click"],e=e.split(", ");for(var r in e){var a=e[r];-1==t.indexOf(a)&&(console.warn('layers.getLayerProps Warning: "'.concat(a,'" is not a valid trigger.')),e.splice(r,1))}return e}var o={dropdown:["primary-click"],tooltip:["focus"],panel:["primary-click"]};return o[n.type]?o[n.type]:[]}(),n.position=((o={pos:dom.get(s,"attr","data-layer-pos"),align:dom.get(s,"attr","data-layer-align"),isSticky:dom.has(s,"class","sticky"),useCursor:dom.has(s,"class","use-cursor"),followCursor:dom.has(s,"class","follow-cursor"),lazyFollow:dom.has(s,"class","lazy-follow")}).pos||(o.pos="top"),o.align||(o.align="center"),o),n.target=function(){var t="data-layer-target",e="layer-target",r="data-layer-targets",a=dom.get(s,"attr",t);if(a){var o=dom.find.id(a);if(o)return o;console.warn('Layer "'.concat(s.id,'" targets an inexistent element: "').concat(a,'".'))}if(s.previousElementSibling)for(var n=s;null!==(n=n.previousElementSibling);)if(n&&dom.has(n,"class",e))return n;if(s.id){var i,d=_createForOfIteratorHelper(dom.find.children(document.body,"attr",r));try{for(d.s();!(i=d.n()).done;){var c=i.value;if(dom.has(c,"attr",r,s.id))return c}}catch(t){d.e(t)}finally{d.f()}}return!1}(),n.delay=(r=dom.get(s,"attr","data-layer-delay"),a={none:50,short:250,medium:500,long:1e3},r&&a[r]?a[r]:n.target&&-1!=["button","a"].indexOf(dom.get(n.target,"tag"))?a.short:a.medium),n.content=dom.find.child(s,"class","layer-content"),n.choices=!!(e=dom.find.child(s,"class","choice-list"))&&dom.find.children(e,"class","choice")),n}catch(t){return console.error("layers.getLayerProps Error: ".concat(t)),!1}var e,r,a,o},updateLayerPos:function(n,t){var e,r,a,o,i,d=1<arguments.length&&void 0!==t&&t;try{!function(){if(void 0===n||!n||!dom.has(n,"class","layer"))throw"Provided layer is not a valid layer."}();var c=this.getLayerProps(n);if(null===document.body)throw"DOM is not yet ready.";if(!1===c.target)throw"Target not found for layer: ".concat(c.id);if(!1===c.content)throw"Content wrapper not found for layer: ".concat(c.id);var s={pos:"data-layer-pos"};s.posO="".concat(s.pos,"-original"),s.posR="".concat(s.pos,"-resolved"),s.align="data-layer-align",s.alignO="".concat(s.align,"-original"),s.alignR="".concat(s.align,"-resolved");var l=c.position.isSticky;return!d&&n.style.top&&!c.position.followCursor&&l||(dom.has(n,"attr",s.pos)||edit.attr(n,"add",s.pos,c.position.pos),function(){var t,e,r={},a={body:document.body.getBoundingClientRect(),target:c.target.getBoundingClientRect()};for(var o in c.position.useCursor?(a.cursor=(t=ShiftCodesTK.client.cursor.x,e=ShiftCodesTK.client.cursor.y,{top:"".concat(e-4),right:"".concat(t+4),bottom:"".concat(e+4),left:"".concat(t-4)}),r={top:l?"".concat(a.cursor.top,"px"):"calc(".concat(a.body.top.toString().replace("-",""),"px + ").concat(a.cursor.top,"px)"),right:"calc(100% - ".concat(a.cursor.right,"px)"),bottom:l?"calc(".concat(a.body.height,"px - ").concat(a.cursor.bottom,"px)"):"calc(".concat(a.body.top,"px + ").concat(a.body.height,"px - ").concat(a.cursor.bottom,"px)"),left:"".concat(a.cursor.left,"px")},c.position.useCursor&&c.position.followCursor&&c.position.lazyFollow&&(-1!=["top","bottom"].indexOf(c.position.pos)?(r.top="calc(".concat(a.body.top.toString().replace("-",""),"px + ").concat(a.target.top,"px)"),r.bottom="calc(".concat(a.body.top,"px + ").concat(a.body.height,"px - ").concat(a.target.bottom,"px)")):-1!=["left","right"].indexOf(c.position.pos)&&(r.left="".concat(a.target.left,"px"),r.right="calc(100% - ".concat(a.target.right,"px)")))):r={top:l?"".concat(a.target.top,"px"):"calc(".concat(a.body.top.toString().replace("-",""),"px + ").concat(a.target.top,"px)"),right:"calc(100% - ".concat(a.target.right,"px)"),bottom:l?"calc(".concat(a.body.height,"px - ").concat(a.target.bottom,"px)"):"calc(".concat(a.body.top,"px + ").concat(a.body.height,"px - ").concat(a.target.bottom,"px)"),left:"".concat(a.target.left,"px")},r)n.style[o]=r[o]}(),"tooltip"==c.type&&(dom.has(n,"class","wrapped")&&!d||(o=n.hidden?209:220,d&&dom.has(n,"class","wrapped")&&edit.class(n,"remove","wrapped"),i=c.content.getBoundingClientRect(),dom.find.child(c.content,"class","content-container").getBoundingClientRect().width>i.width-24&&i.width==o&&edit.class(n,"add","wrapped"))),a="small-target",!dom.has(n,"class",a)&&n.getBoundingClientRect().width<=24&&edit.class(n,"add",a),function(){function o(){var t=document.body.getBoundingClientRect(),e=c.content.getBoundingClientRect(),r={top:e.top<12,right:e.right>t.right-12,bottom:e.bottom>t.height-12,left:e.left<12};for(var a in r)if(!0===r[a])return a;return!1}function t(t){for(var e=0,r=["pos","align"];e<r.length;e++){var a=r[e],o=dom.get(n,"attr",s["".concat(a).concat(t.toUpperCase())]);o&&edit.attr(n,"update",s[a],o)}}if(t("o"),o()&&(t("r"),overflowingSide=o())){var e={alignToOverflowingSide:function(){var t=c.position.align;edit.attr(n,"update",s.align,overflowingSide),t&&!dom.has(n,"attr",s.alignO)&&edit.attr(n,"add",s.alignO,t),o()||edit.attr(n,"add",s.alignR,overflowingSide)},moveToAlternativePosition:function(){var t,e=c.position.pos,r=_createForOfIteratorHelper({top:["bottom","right","left"],right:["left","top","bottom"],bottom:["top","right","left"],left:["right","top","bottom"]}[overflowingSide]);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(edit.attr(n,"update",s.pos,a),e&&!dom.has(n,"attr",s.posO)&&edit.attr(n,"add",s.posO,e),!o())return edit.attr(n,"add",s.posR,a),!0}}catch(t){r.e(t)}finally{r.f()}},resetToDefaultPosition:function(){t("o")}};for(solution in e)if(e[solution](),overflowingSide=o(),!overflowingSide)break}}(),e=c.content.getBoundingClientRect(),r=c.target.getBoundingClientRect(),dom.has(n,"class","wrapped")&&2*e.width<r.width?dom.has(n,"class","pull-pointer")||edit.class(n,"add","pull-pointer"):dom.has(n,"class","pull-pointer")&&edit.class(n,"remove","pull-pointer")),!0}catch(t){return console.error("layers.updateLayerPos Error: ".concat(t)),!1}},checkCursor:function(t){try{var e=ShiftCodesTK.client.cursor.target,r=this.getLayerProps(t),a={target:function(){var t=dom.has(e,"class","layer-target",null,!0);return!(!t||t.hidden)&&t==r.target},content:function(){var t=dom.has(e,"class","layer-content",null,!0);return!!t&&t==r.content},pointer:function(){return e==dom.find.child(r.content.parentNode,"class","pointer")}};for(var o in a)if(a[o]())return o;return!1}catch(t){return console.error("layers.checkCursor Error: ".concat(t)),!1}},addLayerListener:function(t,r,e){var a=2<arguments.length&&void 0!==e?e:["click"];try{function o(t){var e=ShiftCodesTK.layers;e.layerListeners[t]||(e.layerListeners[t]=[]),e.layerListeners[t].push({callback:r,triggers:a})}return function(){if(void 0===t||"string"!=typeof t&&!0!==t)throw"A valid layer name must be provided.";if(void 0===r||"function"!=typeof r)throw"Provided callback is not a callable function."}(),o(!0!==t?t:"_allLayers"),!0}catch(t){return console.error("layers.addLayerListener Error: ".concat(t)),!1}},updateDropdownLayer:function(t,e,r){var a=!(2<arguments.length&&void 0!==r)||r;try{!function(){if(void 0===t||!t||!dom.has(t,"class","layer")||!dom.has(t,"class","dropdown"))throw"Provided layer is not a valid dropdown layer.";if(void 0===e||"string"!=typeof e||!dom.find.child(t,"attr","data-value",e))throw'"'.concat(e,'" is not a valid option name.')}();var o=this.getLayerProps(t),n=dom.find.child(t,"attr","data-value",e);if(a&&this.layerListenerEvent(n,t,"click"),dom.has(n,"class","auto-press")){var i,d=_createForOfIteratorHelper(o.choices);try{for(d.s();!(i=d.n()).done;){var c=i.value,s=dom.get(c,"attr","data-value");edit.attr(c,"update","aria-pressed",s==e)}}catch(t){d.e(t)}finally{d.f()}}return a&&dom.has(n,"class","auto-toggle")&&this.toggleLayer(t,!1),!0}catch(t){return console.error("layers.updateDropdownLayer Error: ".concat(t)),!1}},toggleLayer:function(t,e){var r=1<arguments.length&&void 0!==e?e:"toggle";try{(function(){if(void 0===t||!t||!dom.has(t,"class","layer"))throw"Provided layer is not a valid layer.";if(!dom.has(t,"class","configured")){if(dom.has(t,"class","no-auto-config"))throw"Provided layer has not been configured.";t=this.setupLayer(t)}if(-1==[!0,!1,"toggle"].indexOf(r))throw'"'.concat(r,' is not a valid state."')}).bind(this)();var i=this.getLayerProps(t);if(""!=i.id&&null===i.id.match(new RegExp("_placeholder$"))){function a(){i.target&&("dropdown"!=i.type&&"panel"!=i.type||(-1!=i.triggers.indexOf("focus")&&!dom.has(i.target,"class","auto-press")||edit.attr(i.target,"update","aria-pressed",r),edit.attr(i.target,"update","aria-expanded",r)))}var o="".concat(i.id,"_placeholder");if("toggle"==r&&(r=!i.active),r&&!i.active){var n=edit.copy(t);return this.layerContainer.appendChild(n),(i=this.getLayerProps(n)).active=!0,this.activeLayers[i.id]=i,a(),edit.attr(t,"update","id",o),t.innerHTML="",this.updateLayerPos(n),"dropdown"!=i.type&&"panel"!=i.type||(function(){var t=[n.childNodes[0],n.childNodes[1]];i.target&&t.push(i.target),focusLock.set(t,function(){this.toggleLayer(n,!1)}.bind(this))}.bind(this)(),function(){if(i.choices){var t,e=_createForOfIteratorHelper(i.choices);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(dom.has(r,"attr","aria-pressed","true"))return r.focus()}}catch(t){e.e(t)}finally{e.f()}var a,o=_createForOfIteratorHelper(i.choices);try{for(o.s();!(a=o.n()).done;){var n=a.value;if(!n.disabled)return n.focus()}}catch(t){o.e(t)}finally{o.f()}}}()),setTimeout(function(){isHidden(n,!1),this.cleanupLayers()}.bind(this),25),!0}if(!r&&i.active){var d,c=dom.find.id(o);return delete this.activeLayers[i.id],a(),isHidden(t,!0),c&&(edit.attr(t,"remove","id"),edit.attr(c,"update","id",i.id),c.innerHTML=t.innerHTML),"dropdown"!=i.type&&"panel"!=i.type||(d=ShiftCodesTK.client.cursor.target,dom.has(d,"class","choice")&&(ShiftCodesTK.client.cursor.target=d.parentNode),dom.has(i.target,"class","auto-press")&&edit.attr(i.target,"update","aria-pressed",!1),focusLock.clear(),i.target.focus()),setTimeout(function(){t&&t.parentNode&&deleteElement(t),this.cleanupLayers()}.bind(this),125),!0}}return!1}catch(t){return console.error("layers.toggleLayer Error: ".concat(t)),null}},cleanupLayers:function(t){var a=this,o=0<arguments.length&&void 0!==t&&t,n=(function(){var t=ShiftCodesTK.client.cursor.target;if(dom.has(t,"class","layer-target"))return;var e=dom.find.parent(t,"class","layer-target")}(),0);for(var e in this.activeLayers)!function(t){var e=a.activeLayers[t],r=dom.find.id(t);(0==e.triggers.indexOf("focus")&&1==e.triggers.length&&!a.checkCursor(r)||o)&&(n++,setTimeout(function(){a.toggleLayer(r,!1)},50))}(e);return setTimeout(function(){var t,e=_createForOfIteratorHelper(dom.find.id("layers").children);try{for(e.s();!(t=e.n()).done;){var r=t.value;""!=r.id&&void 0!==this.activeLayers[r.id]&&!o||(n++,deleteElement(r))}}catch(t){e.e(t)}finally{e.f()}}.bind(this),250),n},detachLayer:function(r){var t=function(){var t=dom.get(r,"attr","data-layer-target");if(t){var e=dom.find.id(t);if(e)return e}return!1}();if(t){for(var e=0,a=["aria-describedby","data-layer-targets","aria-owns"];e<a.length;e++){var o=a[e];dom.has(t,"attr",o)&&edit.attr(t,"list",o,r.id)}return dom.has(r,"class","dropdown")&&dom.has(t,"attr","aria-haspopup","menu")&&(edit.attr(t,"remove","aria-haspopup"),edit.attr(t,"remove","aria-expanded")),deleteElement(r),!0}return!1},detachLayers:function(t){var e=dom.get(t,"attr","data-layer-targets");if(e){var r,a=[],o=_createForOfIteratorHelper(e.split(", "));try{for(o.s();!(r=o.n()).done;){var n=r.value,i=dom.find.id(n);i&&(a.push(i),this.detachLayer(i))}}catch(t){o.e(t)}finally{o.f()}return a}return!1},layerListenerEvent:function(t,r,e){try{var a=function(){var t=this.getLayerProps(r),e=[];return this.layerListeners._allLayers&&(e=e.concat(this.layerListeners._allLayers)),t.name&&this.layerListeners[t.name]&&(e=e.concat(this.layerListeners[t.name])),e}.bind(this)();if(a){var o,n=_createForOfIteratorHelper(a);try{for(n.s();!(o=n.n()).done;){var i=o.value,d={focus:this.layerEvents.focus.true.concat(this.layerEvents.focus.false),click:["click"],contextmenu:["contextmenu"]};for(var c in d){var s=d[c];-1!=i.triggers.indexOf(c)&&-1!=s.indexOf(e)&&i.callback(t,r)}}}catch(t){n.e(t)}finally{n.f()}}return!0}catch(t){return console.error("layers.layerListenerEvent Error: ".concat(t)),!1}},layerEvent:function(a){var t,e,s=ShiftCodesTK.layers,o=function(){if(a.target.tagName)for(var t=0,e=["layer-target","action"];t<e.length;t++){var r=e[t];if(o=dom.has(a.target,"class",r,null,!0))return o}return!1}(),l=a.type;if(o&&-1!=s.layerEvents.focus.true.concat(s.layerEvents.focus.false,s.layerEvents.click).indexOf(l)){var r,n,i,d="data-layer-targets",c=!!(e=dom.has(o,"attr",d,null,!0))&&dom.get(e,"attr",d),u=function(){if(dom.has(o,"class","action"))return o;if(-1!=s.layerEvents.focus.true.concat(s.layerEvents.click).indexOf(l)){var t=dom.find.parent(o,"class","action");if(t)return t}return!1}();if(c&&(-1!=s.layerEvents.focus.false.indexOf(l)||!o.disabled||dom.has(o,"class","allow-disabled-layers"))){var f,y=_createForOfIteratorHelper(c.split(", "));try{for(y.s();!(f=y.n()).done;)!function(){var n,i,d,t,e,r=f.value,c=dom.find.id(r);c&&(n=s.getLayerProps(c),-1!=s.layerEvents.focus.true.concat(s.layerEvents.focus.false).indexOf(l)&&-1!=n.triggers.indexOf("focus")&&(i=function(t){if(d[t][n.id]){var e,r=_createForOfIteratorHelper(d[t][n.id]);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=tryParseInt(a.toString().replace(new RegExp("^(timeout|interval)\\-"),""));clearTimeout(o)}}catch(t){r.e(t)}finally{r.f()}delete d[t][n.id]}},d=s.layerTimeouts,"mouseover"==l||"focusin"==l||"touchstart"==l?(-1!=(-1!=n.triggers.indexOf("primary-click")||n.triggers.indexOf("secondary-click"))&&(dom.has(o,"attr","aria-pressed","true")||dom.has(o,"attr","aria-expanded","true")),"touchstart"==l&&edit.class(o,"add","touch-event"),dom.has(o,"attr","aria-expanded","true")||dom.has(o,"class","touch-event")&&"touchstart"!=l||(void 0===d.focusin[n.id]&&(d.focusin[n.id]=[]),d.focusin[n.id].push(setTimeout(function(){setTimeout(function(){"target"==s.checkCursor(c)&&(i("focusin"),s.toggleLayer(c,!0))},10)},n.delay)))):-1!=["mouseleave","mouseout","focusout","touchend","click"].indexOf(l)&&(t=function(){!function e(t){var r=!(0<arguments.length&&void 0!==t)||t;function a(){var t=s.checkCursor(c);("target"==t||!1===t||void 0!==d.focusout[n.id]&&-1==d.focusout[n.id].join().indexOf("interval"))&&i("focusout"),t?"target"!=t&&void 0===d.focusout[n.id]&&e(!1):(i("focusin"),s.toggleLayer(c,!1))}void 0===d.focusout[n.id]&&(d.focusout[n.id]=[]);var o=r?setTimeout(a,50):setInterval(a,1e3);d.focusout[n.id].push(r?"timeout-".concat(o):"interval-".concat(o))}()},e=s.checkCursor(c),"mouseout"==l&&!dom.has(o,"class","touch-event")||"touchend"==l?("touchend"==l&&edit.class(o,"remove","touch-event"),e||t()):"click"==l&&"tooltip"==n.type&&-1!=n.triggers.indexOf("focus")&&"target"==e?s.toggleLayer(c,!1):"click"==l&&"dropdown"==n.type||t())),"click"==l?-1!=n.triggers.indexOf("primary-click")||-1!=n.triggers.indexOf("secondary-click")&&n.active?s.toggleLayer(c):n.triggers.indexOf("focus"):"contextmenu"==l&&-1!=n.triggers.indexOf("secondary-click")&&(a.preventDefault(),n.active?s.updateLayerPos(c,!0):s.toggleLayer(c,!0)))}()}catch(t){y.e(t)}finally{y.f()}}!u||(r=dom.find.parent(u,"class","layer"))&&(n=s.getLayerProps(r),-1!=s.layerEvents.focus.true.concat(s.layerEvents.focus.false).indexOf(l)&&"dropdown"==n.type&&(i=dom.find.child(r,"class","choice-list"),-1!=s.layerEvents.focus.true.indexOf(l)?edit.attr(i,"update","aria-activedescendent",u.parentNode.id):setTimeout(function(){var t=ShiftCodesTK.client.cursor.target;t!==u&&dom.find.parent(t,"class","action")!==u&&edit.attr(i,"remove","aria-activedescendent")},10)),"click"==l&&(n&&"dropdown"==n.type?"dropdown"==n.type&&s.updateDropdownLayer(r,dom.get(u,"attr","data-value"),!0):s.layerListenerEvent(u,r,l)))}else if(-1!=s.layerEvents.resync.indexOf(l)){var p=s.activeLayers;if(0<Object.keys(p).length){var g=randomNum(0,25);for(var h in p){var v=p[h],m=dom.find.id(h),b="resize"==l||"scroll"==l&&"dropdown"!=v.type||"mousemove"==l&&v.position.followCursor;25!=g||-1==v.triggers.indexOf("focus")||s.checkCursor(m)?b&&s.updateLayerPos(dom.find.id(v.id)):s.toggleLayer(m,!1)}}}else{!dom.has(a.target,"class","auto-toggle")||(t=dom.find.parent(a.target,"class","layer"))&&s.toggleLayer(t,!1)}},setupLayer:function(d){try{if(void 0===d||!d||!dom.has(d,"class","layer"))throw"Provided layer is not a valid element.";if(dom.has(d,"class","configured"))return!1;var u=this.getLayerProps(d),c={};return c.layer=void 0!==u.id&&""!==u.id?u.id:randomID("layer_",1e5,999999),c.content="".concat(c.layer,"_content"),c.target=void 0!==u.target.id&&""!==u.target.id?u.target.id:randomID("layer_target_",1e5,999999),function(){var t,e,r,a,o,l=(t=document.createElement("div"),e=document.createElement("div"),edit.class(t,"add","layer-content"),edit.class(e,"add","content-container"),e.id=c.content,e.innerHTML=d.innerHTML,t.appendChild(e),t);d.id=c.layer,u.id=c.layer,edit.class(d,"add","configured"),edit.attr(d,"add","data-layer-target",c.target),isHidden(d,!0),c.target&&((r=dom.get(d,"attr","aria-controls"))&&-1!=r.indexOf(c.target)||edit.attr(d,"list","aria-controls",c.target)),"dropdown"==u.type?((o=dom.find.child(l,"class","title"))&&(a="".concat(u.id,"_title"),edit.attr(o,"add","id",a),edit.attr(d,"add","aria-labelledby",a)),function(){var t,e,r,a,o,n,i,d=function(){if(!(e=dom.find.child(l,"class","choice-list"))){var t=dom.find.children(l,"class","choice"),e=document.createElement("ul");edit.class(e,"add","choice-list");for(var r=0;r<t.length;r++)e.appendChild(t[r]);e=l.appendChild(e)}return edit.attr(e,"add","role","menu"),e}(),c=dom.find.children(d,"class","choice");if(!1!==c)for(var s=0;s<c.length;s++)i=n=o=a=r=e=void 0,n=c[t=s],i="".concat(u.id,"_choice_").concat(t),edit.class(n,"add","action"),dom.get(n,"attr","data-value")||edit.attr(n,"add","data-value","choice_".concat(t)),dom.has(l,"class","auto-toggle")&&edit.attr(n,"add","aria-pressed","false"),(r=dom.find.child(n,"class","label"))&&(e="".concat(i,"_label"),edit.attr(r,"add","id",e),edit.attr(n,"add","aria-labelledby",e)),(a=dom.find.parent(n,"tag","li"))||(a=document.createElement("li"),(a=n.insertAdjacentElement("afterend",a)).appendChild(n)),(o=a).id=i,edit.attr(o,"add","role","menuitem");else console.warn('layers.setupLayer Warning: Dropdown layer "'.concat(u.id,'" did not provide any choices.'))}()):"tooltip"==u.type&&edit.attr(d,"add","role","tooltip");var n,i=(n=document.createElement("div"),edit.class(n,"add","pointer box-icon fas fa-caret-up"),edit.attr(n,"add","aria-hidden",!0),n);d.innerHTML="",d.appendChild(l),d.appendChild(i)}(),function(){if(!u.target)throw'A target could not be found for layer "'.concat(u.id,'".');var t=["data-layer-targets","aria-owns"],e={id:c.target,autocomplete:"off","data-layer-targets":c.layer};for(var r in"dropdown"==u.type||"panel"==u.type?(e=mergeObj(e,{"aria-expanded":!1,"aria-pressed":!1,"aria-owns":c.layer}),"dropdown"==u.type&&(e=mergeObj(e,{"aria-haspopup":"menu"}))):"tooltip"==u.type&&edit.attr(u.target,"update","aria-describedby",c.content),e)edit.attr(u.target,-1!=t.indexOf(r)?"list":"update",r,e[r])}(),d}catch(t){return console.error("layers.setupLayer Error: ".concat(t)),!1}},setupChildLayers:function(t){try{if(void 0===t||!t)throw"Provided parent is not a valid element.";var e,r=dom.find.children(t,"class","layer"),a=[],o=_createForOfIteratorHelper(r);try{for(o.s();!(e=o.n()).done;){var n=e.value;dom.has(n,"class","configured")||dom.has(n,"class","no-auto-config")||(layerSetupResult=this.setupLayer(n),layerSetupResult?a.push(layerSetupResult):console.warning("layers.setupChildLayers Warning: Failed to setup layer: ",n))}}catch(t){o.e(t)}finally{o.f()}return a}catch(t){return console.error("layers.setupChildLayers Error: ".concat(t)),!1}},updateTooltip:function(n,t,e){var r,a,o=1<arguments.length&&void 0!==t?t:null,i=2<arguments.length&&void 0!==e?e:{},s=function(){var o="data-layer-target",t={searchByElementAttr:function(){var t=dom.get(n,"attr","data-layer-targets");if(!1!==t){var e,r=_createForOfIteratorHelper(t.split(", "));try{for(r.s();!(e=r.n()).done;){var a=e.value,o=dom.find.id(a);if(o&&dom.has(o,"class","tooltip"))return o}}catch(t){r.e(t)}finally{r.f()}}return!1},searchByTooltipAttr:function(){if(""!=n.id){var t=dom.find.child(document.body,"attr",o,n.id);if(t&&dom.has(t,"class","tooltip"))return t}return!1},searchForCloseSiblings:function(){for(var t=0,e=[n.nextElementSibling,n.previousElementSibling];t<e.length;t++){var r=e[t];if(r&&dom.has(r,"class","layer tooltip")){var a=dom.get(r,"attr",o);if(!dom.has(r,"class","configured")&&!dom.has(r,"class","no-auto-config")&&!1===a||n.id&&a==n.id)return r}}return!1},searchForAllSiblings:function(){if(void 0!==n.parentNode){var t,e=_createForOfIteratorHelper(dom.find.children(n.parentNode,"class","layer tooltip"));try{for(e.s();!(t=e.n()).done;){var r=t.value,a=dom.get(r,"attr",o);if(r.parentNode==n.parentNode&&(!dom.has(r,"class","configured")&&!dom.has(r,"class","no-auto-config")&&!1===a||n.id&&a==n.id))return r}}catch(t){e.e(t)}finally{e.f()}}return!1}};for(var e in t){var r=t[e]();if(!1!==r)return r}return!1}();if(null!==o)return s||(a=document.createElement("div"),edit.class(a,"add","layer tooltip"),edit.attr(a,"add","data-layer-delay","medium"),r=a,s=n.insertAdjacentElement("afterend",r),edit.class(n,"add","layer-target")),dom.has(s,"class","configured")||ShiftCodesTK.layers.setupLayer(s),function i(d,c){for(var t in d)!function(t){var e,r,a,o,n=d[t];if("object"==_typeof(n))return void 0!==c[t]&&i(n,c[t]);void 0!==c[t]&&(r=-1!=n.indexOf("data-layer")?"attr":"class",a=dom.has(s,r,n),e=c[t],Array.isArray(e)&&(e=e.join(", ")),null!==(o=e)?edit[r](s,"add",n,o):a&&edit[r](s,"remove",n))}(t)}({delay:"data-layer-delay",name:"data-layer-name",position:{align:"data-layer-align",followCursor:"follow-cursor",isSticky:"sticky",lazyFollow:"lazy-follow",pos:"data-layer-pos",useCursor:"use-cursor"},triggers:"data-layer-triggers"},i),dom.find.child(s,"class","content-container").innerHTML=o,!0;if(s){for(var d=0,c=["aria-describedby","data-layer-targets","aria-owns"];d<c.length;d++){var l=c[d];edit.attr(n,"list",l,s.id)}return deleteElement(s),!0}throw"A tooltip is not currently attached to the provided target."}},function(){var t=setInterval(function(){var a;"undefined"!=typeof globalFunctionsReady&&(clearInterval(t),(a=ShiftCodesTK.layers).layerContainer=dom.find.id("layers"),function(){var t,e=_createForOfIteratorHelper(a.layerEvents.focus.true.concat(a.layerEvents.focus.false,a.layerEvents.click,a.layerEvents.resync));try{for(e.s();!(t=e.n()).done;){var r=t.value;window.addEventListener(r,a.layerEvent,!0)}}catch(t){e.e(t)}finally{e.f()}}(),a.layerTimeouts.purgeExtraLayers=setInterval(function(){a.cleanupLayers()},5e3),addPageLoadHook(function(){!function(){var t,e=_createForOfIteratorHelper(dom.find.children(document.body,"class","layer"));try{for(e.s();!(t=e.n()).done;){var r=t.value;dom.has(r,"class","configured")||dom.has(r,"class","no-auto-config")||a.setupLayer(r)}}catch(t){e.e(t)}finally{e.f()}a.isLoaded=!0}()}))},250)}();