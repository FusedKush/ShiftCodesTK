function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);function a(){}var o=0;return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,d=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){d=!0,n=t},f:function(){try{i||null==r.return||r.return()}finally{if(d)throw n}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}ShiftCodesTK.layers={layerListeners:{},activeLayers:{},layerTimeouts:{},layerEvents:{focus:{true:["mouseover","focusin"],false:["mouseleave","mouseout","focusout"]},click:["click","contextmenu"],resync:["resize","scroll","mousemove"]},layerContainer:dom.find.id("layers"),getLayerProps:function(f){try{!function(){if(void 0===f||!f||!dom.has(f,"class","layer"))throw"Provided layer is not a valid layer."}();var n={},t=!!f.id&&this.activeLayers[f.id];return t?n=t:(n.id=f.id,n.name=dom.get(f,"attr","data-layer-name"),n.active=!1,n.type=dom.has(f,"class","dropdown")?"dropdown":!!dom.has(f,"class","tooltip")&&"tooltip",n.triggers=function(){if(e=dom.get(f,"attr","data-layer-triggers")){var t=["focus","primary-click","secondary-click"],e=e.split(", ");for(var r in e){var a=e[r];-1==t.indexOf(a)&&(console.warn('layers.getLayerProps Warning: "'.concat(a,'" is not a valid trigger.')),e.splice(r,1))}return e}var o={dropdown:["primary-click"],tooltip:["focus"]};return o[n.type]?o[n.type]:[]}(),n.position=((o={pos:dom.get(f,"attr","data-layer-pos"),align:dom.get(f,"attr","data-layer-align"),isSticky:dom.has(f,"class","sticky"),useCursor:dom.has(f,"class","use-cursor"),followCursor:dom.has(f,"class","follow-cursor")}).pos||(o.pos="top"),o.align||(o.align="center"),o),n.target=function(){var t="data-layer-target",e="layer-target",r="data-layer-targets",a=dom.get(f,"attr",t);if(a){var o=dom.find.id(a);if(o)return o}for(var n=0,i=[f.previousElementSibling,f.nextElementSibling];n<i.length;n++){var d=i[n];if(d&&dom.has(d,"class",e))return d}if(f.parentNode){var c=dom.find.child(f.parentNode,"class",e);if(c)return c}if(f.id){var s,l=_createForOfIteratorHelper(dom.find.children(document.body,"attr",r));try{for(l.s();!(s=l.n()).done;){var u=s.value;if(dom.has(u,"attr",r,f.id))return u}}catch(t){l.e(t)}finally{l.f()}}return!1}(),n.delay=(r=dom.get(f,"attr","data-layer-delay"),a={none:50,short:250,medium:500,long:1e3},r&&a[r]?a[r]:-1!=["button","a"].indexOf(dom.get(n.target,"tag"))?a.none:a.medium),n.content=dom.find.child(f,"class","layer-content"),n.choices=!!(e=dom.find.child(f,"class","choice-list"))&&dom.find.children(e,"class","choice")),n}catch(t){return console.error("layers.getLayerProps Error: ".concat(t)),!1}var e,r,a,o},updateLayerPos:function(d,t){var e,r=1<arguments.length&&void 0!==t&&t;try{!function(){if(void 0===d||!d||!dom.has(d,"class","layer"))throw"Provided layer is not a valid layer."}();var c=this.getLayerProps(d);if(null===document.body||0==c.target||0==c.content)return!1;var i=c.position.isSticky;return!r&&d.style.top&&!c.position.followCursor&&i||(dom.has(d,"attr","data-layer-pos")||edit.attr(d,"add","data-layer-pos",c.position.pos),function(){var t,e,r,a,o={};for(var n in o=c.position.useCursor?(t=ShiftCodesTK.cursor.x,e=ShiftCodesTK.cursor.y,r={body:document.body.getBoundingClientRect(),cursor:{top:"".concat(e-8),right:"".concat(t+8),bottom:"".concat(e+8),left:"".concat(t-8)}},{top:i?"".concat(r.cursor.top,"px"):"calc(".concat(r.body.top.toString().replace("-",""),"px + ").concat(r.cursor.top,"px)"),right:"calc(100% - ".concat(r.cursor.right,"px)"),bottom:i?"calc(".concat(r.body.height,"px - ").concat(r.cursor.bottom,"px)"):"calc(".concat(r.body.top,"px + ").concat(r.body.height,"px - ").concat(r.cursor.bottom,"px)"),left:"".concat(r.cursor.left,"px")}):(a={body:document.body.getBoundingClientRect(),target:c.target.getBoundingClientRect()},{top:i?"".concat(a.target.top,"px"):"calc(".concat(a.body.top.toString().replace("-",""),"px + ").concat(a.target.top,"px)"),right:"calc(100% - ".concat(a.target.right,"px)"),bottom:i?"calc(".concat(a.body.height,"px - ").concat(a.target.bottom,"px)"):"calc(".concat(a.body.top,"px + ").concat(a.body.height,"px - ").concat(a.target.bottom,"px)"),left:"".concat(a.target.left,"px")}))d.style[n]=o[n]}(),"tooltip"!=c.type||dom.has(d,"class","wrapped")&&!r||(dom.has(d,"class","wrapped")&&r&&edit.class(d,"remove","wrapped"),e=c.content.getBoundingClientRect(),dom.find.child(c.content,"class","content-container").getBoundingClientRect().width>e.width-12&&edit.class(d,"add","wrapped")),function(){var t;function e(){var t=document.body.getBoundingClientRect(),e=c.content.getBoundingClientRect(),r={top:e.top<12,right:e.right>t.right-12,bottom:e.bottom>t.height-12,left:e.left<12};for(side in r){if(r[side])return side}return!1}function r(t){for(var e=0<arguments.length&&void 0!==t?t:"original",r=0,a=["pos","align"];r<a.length;r++){var o=a[r],n=dom.get(d,"attr","data-layer-".concat(o,"-").concat(e));n&&edit.attr(d,"update","data-layer-".concat(o),n)}}if(r(),e()&&(r("resolved"),isOverflowing=e())){if((t=c.position.align)&&!dom.has(d,"attr","data-layer-align-original")&&edit.attr(d,"add","data-layer-align-original",t),edit.attr(d,"update","data-layer-align",side),edit.attr(d,"update","data-layer-align-resolved",side),e()){var a,o=_createForOfIteratorHelper({top:["bottom","right","left"],right:["left","top","bottom"],bottom:["top","right","left"],left:["right","top","bottom"]}[isOverflowing]);try{for(o.s();!(a=o.n()).done;){var n=a.value;if(edit.attr(d,"update","data-layer-pos",n),!e()){var i=c.position.pos;return i&&!dom.has(d,"attr","data-layer-pos-original")&&edit.attr(d,"add","data-layer-pos-original",i),edit.attr(d,"add","data-layer-pos",n),edit.attr(d,"add","data-layer-pos-resolved",n)}}}catch(t){o.e(t)}finally{o.f()}}e()&&r()}}()),!0}catch(t){return console.error("layers.updateLayerPos Error: ".concat(t)),!1}},addLayerListener:function(t,r,e){var a=2<arguments.length&&void 0!==e?e:["click"];try{function o(t){var e=ShiftCodesTK.layers;e.layerListeners[t]||(e.layerListeners[t]=[]),e.layerListeners[t].push({callback:r,triggers:a})}return function(){if(void 0===t||"string"!=typeof t&&!0!==t)throw"A valid layer name must be provided.";if(void 0===r||"function"!=typeof r)throw"Provided callback is not a callable function."}(),o(!0!==t?t:"_allLayers"),!0}catch(t){return console.error("layers.addLayerListener Error: ".concat(t)),!1}},updateDropdownLayer:function(t,e,r){var a=!(2<arguments.length&&void 0!==r)||r;try{!function(){if(void 0===t||!t||!dom.has(t,"class","layer")||!dom.has(t,"class","dropdown"))throw"Provided layer is not a valid dropdown layer.";if(void 0===e||"string"!=typeof e||!dom.find.child(t,"attr","data-value",e))throw'"'.concat(e,'" is not a valid option name.')}();var o=this.getLayerProps(t),n=dom.find.child(t,"attr","data-value",e);if(a&&this.layerListenerEvent(n,t,"click"),dom.has(t,"class","auto-press")){var i,d=_createForOfIteratorHelper(o.choices);try{for(d.s();!(i=d.n()).done;){var c=i.value,s=dom.get(c,"attr","data-value");edit.attr(c,"update","aria-pressed",s==e)}}catch(t){d.e(t)}finally{d.f()}}return a&&dom.has(t,"class","auto-toggle")&&this.toggleLayer(t,!1),!0}catch(t){return console.error("layers.updateDropdownLayer Error: ".concat(t)),!1}},toggleLayer:function(t,e){var r=1<arguments.length&&void 0!==e?e:"toggle";try{!function(){if(void 0===t||!t||!dom.has(t,"class","layer"))throw"Provided layer is not a valid layer.";if(!dom.has(t,"class","configured")){if(dom.has(t,"class","no-auto-config"))throw"Provided layer has not been configured.";t=this.setupLayer(t)}if(-1==[!0,!1,"toggle"].indexOf(r))throw'"'.concat(r,' is not a valid state."')}();var i=this.getLayerProps(t);if(null===i.id.match(new RegExp("_placeholder$"))){function a(){i.target&&"dropdown"==i.type&&(edit.attr(i.target,"update","aria-pressed",r),edit.attr(i.target,"update","aria-expanded",r))}var o="".concat(i.id,"_placeholder");if("toggle"==r&&(r=!i.active),r&&!i.active){var n=edit.copy(t);return this.layerContainer.appendChild(n),(i=this.getLayerProps(n)).active=!0,this.activeLayers[i.id]=i,a(),edit.attr(t,"update","id",o),t.innerHTML="",this.updateLayerPos(n),"dropdown"==i.type&&(function(){var t=[n.childNodes[0],n.childNodes[1]];i.target&&t.push(i.target),focusLock.set(t,function(){this.toggleLayer(n,!1)}.bind(this))}.bind(this)(),function(){if(i.choices){var t,e=_createForOfIteratorHelper(i.choices);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(dom.has(r,"attr","aria-pressed","true"))return r.focus()}}catch(t){e.e(t)}finally{e.f()}var a,o=_createForOfIteratorHelper(i.choices);try{for(o.s();!(a=o.n()).done;){var n=a.value;if(!n.disabled)return n.focus()}}catch(t){o.e(t)}finally{o.f()}}}()),setTimeout(function(){isHidden(n,!1)}.bind(this),25),!0}if(!r&&i.active){var d=dom.find.id(o);return delete this.activeLayers[i.id],a(),isHidden(t,!0),d&&(edit.attr(t,"remove","id"),edit.attr(d,"update","id",i.id),d.innerHTML=t.innerHTML),"dropdown"==i.type&&(focusLock.clear(),i.target.focus()),setTimeout(function(){deleteElement(t)}.bind(this),125),!0}}return!1}catch(t){return console.error("layers.toggleLayer Error: ".concat(t)),null}},layerListenerEvent:function(t,r,e){try{var a=function(){var t=this.getLayerProps(r),e=[];return this.layerListeners._allLayers&&(e=e.concat(this.layerListeners._allLayers)),t.name&&this.layerListeners[t.name]&&(e=e.concat(this.layerListeners[t.name])),e}.bind(this)();if(a){var o,n=_createForOfIteratorHelper(a);try{for(n.s();!(o=n.n()).done;){var i=o.value,d={focus:this.layerEvents.focus.true.concat(this.layerEvents.focus.false),click:["click"],contextmenu:["contextmenu"]};for(var c in d){var s=d[c];-1!=i.triggers.indexOf(c)&&-1!=s.indexOf(e)&&i.callback(t,r)}}}catch(t){n.e(t)}finally{n.f()}}return!0}catch(t){return console.error("layers.layerListenerEvent Error: ".concat(t)),!1}},layerEvent:function(n){var t,e,i=ShiftCodesTK.layers,d=n.type;if(-1!=i.layerEvents.focus.true.concat(i.layerEvents.focus.false,i.layerEvents.click).indexOf(d)){var r,a,o,c="data-layer-targets",s=((e=dom.get(n.target,"attr",c))||-1==["mouseover","mouseout","touchstart","touchend","click","contextmenu"].indexOf(d)||(t=dom.find.parent(n.target,"attr",c))&&(e=dom.get(t,"attr",c)),e),l=function(){if(dom.has(n.target,"class","action"))return n.target;if(-1!=i.layerEvents.focus.true.concat(i.layerEvents.click).indexOf(d)){var t=dom.find.parent(n.target,"class","action");if(t)return t}return!1}();if(s){var u,f=_createForOfIteratorHelper(s.split(", "));try{for(f.s();!(u=f.n()).done;)!function(){var a,t,e,r=u.value,o=dom.find.id(r);o&&(a=i.getLayerProps(o),-1!=i.layerEvents.focus.true.concat(i.layerEvents.focus.false).indexOf(d)?-1!=a.triggers.indexOf("focus")&&(t=function(){var t=ShiftCodesTK.cursor.target;return t===a.target||dom.find.parent(t,"class","layer-target")===a.target},"mouseover"==d||"focusin"==d?-1!=(-1!=a.triggers.indexOf("primary-click")||a.triggers.indexOf("secondary-click"))&&dom.has(n.target,"attr","aria-pressed","true")||(void 0===i.layerTimeouts[a.id]&&(i.layerTimeouts[a.id]=[]),i.layerTimeouts[a.id].push(setTimeout(function(){setTimeout(function(){t()&&i.toggleLayer(o,!0)},10)},a.delay))):-1!=["mouseleave","mouseout","focusout"].indexOf(d)&&(e=function(){if(i.layerTimeouts[a.id]){var t,e=_createForOfIteratorHelper(i.layerTimeouts[a.id]);try{for(e.s();!(t=e.n()).done;){var r=t.value;clearTimeout(r)}}catch(t){e.e(t)}finally{e.f()}delete i.layerTimeouts[a.id]}i.toggleLayer(o,!1)},"mouseout"==d?setTimeout(function(){t()||e()},10):e())):"click"==d?(-1!=a.triggers.indexOf("primary-click")||-1!=a.triggers.indexOf("secondary-click")&&a.active)&&i.toggleLayer(o):"contextmenu"==d&&-1!=a.triggers.indexOf("secondary-click")&&(n.preventDefault(),a.active?i.updateLayerPos(o,!0):i.toggleLayer(o,!0)))}()}catch(t){f.e(t)}finally{f.f()}}!l||(r=dom.find.parent(l,"class","layer"))&&(a=i.getLayerProps(r),-1!=i.layerEvents.focus.true.concat(i.layerEvents.focus.false).indexOf(d)&&"dropdown"==a.type&&(o=dom.find.child(r,"class","choice-list"),-1!=i.layerEvents.focus.true.indexOf(d)?edit.attr(o,"update","aria-activedescendent",l.parentNode.id):setTimeout(function(){var t=ShiftCodesTK.cursor.target;t!==l&&dom.find.parent(t,"class","action")!==l&&edit.attr(o,"remove","aria-activedescendent")},10)),"click"==d&&(a&&"dropdown"==a.type?"dropdown"==a.type&&i.updateDropdownLayer(r,dom.get(l,"attr","data-value"),!0):i.layerListenerEvent(l,r,d)))}else if(-1!=i.layerEvents.resync.indexOf(d)){var y=i.activeLayers;if(0<Object.keys(y).length)for(var p in y){var g=y[p];("resize"==d||"scroll"==d&&"dropdown"!=g.type||"mousemove"==d&&g.position.followCursor)&&i.updateLayerPos(dom.find.id(g.id),"scroll"!=d)}}},setupLayer:function(i){try{if(void 0===i||!i||!dom.has(i,"class","layer"))throw"Provided layer is not a valid element.";var u=this.getLayerProps(i),d={};return d.layer=""!=u.id?u.id:randomID("layer_"),d.content="".concat(d.layer,"_content"),d.target=""!=u.target.id?u.target.id:randomID("layer_target_"),function(){var t,e,r,a,l=(t=document.createElement("div"),e=document.createElement("div"),edit.class(t,"add","layer-content"),edit.class(e,"add","content-container"),e.id=d.content,e.innerHTML=i.innerHTML,t.appendChild(e),t);i.id=d.layer,u.id=d.layer,edit.class(i,"add","configured"),edit.attr(i,"add","data-layer-target",d.target),isHidden(i,!0),"dropdown"==u.type?((a=dom.find.child(l,"class","title"))&&(r="".concat(u.id,"_title"),edit.attr(a,"add","id",r),edit.attr(i,"add","aria-labelledby",r)),function(){var t,e,r,a,o,n,i,d=function(){if(!(e=dom.find.child(l,"class","choice-list"))){var t=dom.find.children(l,"class","choice"),e=document.createElement("ul");edit.class(e,"add","choice-list");for(var r=0;r<t.length;r++)e.appendChild(t[r]);e=l.appendChild(e)}return edit.attr(e,"add","role","menu"),e}(),c=dom.find.children(d,"class","choice");if(!1!==c)for(var s=0;s<c.length;s++)i=n=o=a=r=e=void 0,n=c[t=s],i="".concat(u.id,"_choice_").concat(t),edit.class(n,"add","action"),dom.has(l,"class","auto-toggle")&&edit.attr(n,"add","aria-pressed","false"),(r=dom.find.child(n,"class","label"))&&(e="".concat(i,"_label"),edit.attr(r,"add","id",e),edit.attr(n,"add","aria-labelledby",e)),(a=dom.find.parent(n,"tag","li"))||(a=document.createElement("li"),(a=n.insertAdjacentElement("afterend",a)).appendChild(n)),(o=a).id=i,edit.attr(o,"add","role","menuitem");else console.warn('layers.setupLayer Warning: Dropdown layer "'.concat(u.id,'" did not provide any choices.'))}()):"tooltip"==u.type&&edit.attr(i,"add","role","tooltip");var o,n=(o=document.createElement("div"),edit.class(o,"add","pointer box-icon fas fa-caret-up"),edit.attr(o,"add","aria-hidden",!0),o);i.innerHTML="",i.appendChild(l),i.appendChild(n)}(),function(){if(!u.target)throw'A target could not be found for layer "'.concat(u.id,'".');var t,e={id:d.target,autocomplete:!1,"data-layer-targets":!1!==(t=dom.get(u.target,"attr","data-layer-targets"))?"".concat(t,", ").concat(d.layer):d.layer};for(var r in"dropdown"==u.type?e=mergeObj(e,{"aria-haspopup":"menu","aria-expanded":!1,"aria-pressed":!1}):"tooltip"==u.type&&(e["aria-describedby"]=d.content),e)edit.attr(u.target,"update",r,e[r])}(),i}catch(t){return console.error("layers.toggleLayer Error: ".concat(t)),!1}}},function(){var t=ShiftCodesTK.layers;window.addEventListener("load",function(){(function(){var t,e=_createForOfIteratorHelper(dom.find.children(document.body,"class","layer"));try{for(e.s();!(t=e.n()).done;){var r=t.value;dom.has(r,"class","configured")||dom.has(r,"class","no-auto-config")||this.setupLayer(r)}}catch(t){e.e(t)}finally{e.f()}}).bind(t)()}),function(){var t,e=_createForOfIteratorHelper(this.layerEvents.focus.true.concat(this.layerEvents.focus.false,this.layerEvents.click,this.layerEvents.resync));try{for(e.s();!(t=e.n()).done;){var r=t.value;window.addEventListener(r,this.layerEvent,!0)}}catch(t){e.e(t)}finally{e.f()}}.bind(t)()}();