function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);function a(){}var n=0;return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}ShiftCodesTK.requests={},ShiftCodesTK.requests.isLoaded=!1,function(){var e=setInterval(function(){"undefined"!=typeof globalFunctionsReady&&(clearInterval(e),ShiftCodesTK.requests={isLoaded:!0,DEFAULT_REQUEST_PROPERTIES:{path:null,type:"GET",params:{},callback:null,parseResultJSON:!0,headers:{}},activeRequests:{requestList:{},getRequest:function(e,t){var r=1<arguments.length&&void 0!==t&&t,a=this.requestList[e];if(void 0!==a)return a;if(r)throw'Request "'.concat(e,'" is not currently active.');return!1},addRequest:function(e,t){try{var r=this.requestList;if(void 0!==r[e])throw'Request "'.concat(e,'" is already active.');if(void 0===t)throw'No Request Object was provided for Request "'.concat(e,'".');return r[e]=t,r}catch(e){return console.error("requests.".concat(arguments.callee.name," Error: ").concat(e)),!1}},removeRequest:function(e){try{var t=this.requestList;if(void 0===t[e])throw'Request "'.concat(e,'" is not active.');return delete t[e],t}catch(e){return console.error("requests.".concat(arguments.callee.name," Error: ").concat(e)),!1}},clearAllRequests:function(){var e=Object.keys(this.requestList).length;for(var t in this.requestList)this.removeRequest(t);return e}},savedRequests:{requestList:{},saveRequest:function(a,n,e,t){var r=2<arguments.length&&void 0!==e?e:{},o=3<arguments.length&&void 0!==t?t:[],s=arguments.callee.name,u=ShiftCodesTK.requests;try{var i=this.requestList;if(void 0!==i[a])throw'Request "'.concat(a,'" has already been saved.');if(void 0===n)throw"No Request Configuration Object was provided.";return i[a]={configuration:{type:"standard",request:function(){for(var e={},t=0,r=Object.keys(u.DEFAULT_REQUEST_PROPERTIES);t<r.length;t++)property=r[t],e[property]=null;return e}()},parameters:{},results:{lastResult:null},activeRequest:!1},"pagination"==n.type&&(i[a]=mergeObj(i[a],{configuration:{controls:{sortAndFilter:!1,pager:!1,controlsState:[],syncControls:!0},syncParameters:!1},parameters:{limit:10,page:1},results:{maxChunkSize:0,currentChunkSize:0,totalChunkSize:0,currentChunk:1,totalChunks:1,hasPreviousChunk:!1,hasNextChunk:!1,chunkContents:[]}})),function(){!function(){for(var e={},t=0,r=Object.keys(u.DEFAULT_REQUEST_PROPERTIES);t<r.length;t++)property=r[t],e[property]=null}();var e,t,r=mergeObj(i[a].configuration,n);if(null===r.request.path)throw'A resource path was not provided for request "'.concat(a,'".');r.controls&&(r.controls.sortAndFilter&&(e=r.controls.sortAndFilter,dom.has(e,"tag","form")?dom.has(e,"class","configured")||(console.warn("requests.".concat(s," Warning: The Provided Sorting & Filtering Form has not been configured.")),r.controls.sortAndFilter=!1):(console.warn("requests.".concat(s," Warning: The Provided Sorting & Filtering Form is not a valid form.")),r.controls.sortAndFilter=!1)),r.controls.pager&&(t=r.controls.pager,dom.has(t,"class","pager")?dom.has(t,"class","configured")?addPagerListener(t,function(e){var t=ShiftCodesTK.requests,r=t.savedRequests,a=r.getAllRequests();for(var n in a){var o=a[n];o.configuration.controls&&o.configuration.controls.pager&&(r.setRequestParameter(n,"page",e),o.configuration.syncParameters&&r.syncQueryParams(n,"query"),t.request(n))}}):(console.warn("requests.".concat(s," Warning: The Provided Pager has not been configured.")),r.controls.pager=!1):(console.warn("requests.".concat(s," Warning: The Provided Pager is not a valid Pager.")),r.controls.pager=!1))),i[a].configuration=r}(),function(){if(i[a].parameters={},void 0!==r)for(var e in r){var t=r[e];u.savedRequests.setRequestParameter(a,e,t,-1!=o.indexOf(e))}}(),"pagination"==n.type&&(i[a].configuration.syncParameters&&u.savedRequests.syncQueryParams(a,"params"),i[a].configuration.controls.syncControls&&u.savedRequests.syncControls(a)),i[a]}catch(e){return console.error("requests.".concat(s," Error: ").concat(e)),!1}},getRequest:function(e,t){var r=1<arguments.length&&void 0!==t&&t,a=this.requestList[e];if(void 0!==a)return a;if(r)throw'Request "'.concat(e,'" has not been saved.');return!1},getAllRequests:function(){return this.requestList},getRequestParameter:function(e,t,r){var a=2<arguments.length&&void 0!==r?r:"Default";try{var n=this.getRequest(e,!0).parameters;if(0==Object.keys(n).length)throw'No properties have been assigned to "'.concat(e,'"');var o=n[t];if(void 0===o)throw'Parameter "'.concat(t,'" has not been assigned to "').concat(e,'".');if("Default"==a)return o.value;if("DefaultValue"==a)return o.defaultValue;if("FullData"==a)return o;throw'"'.concat(a,'" is not a valid value for the return value')}catch(e){return console.error("requests.".concat(arguments.callee.name," Error: ").concat(e)),null}},getAllRequestParameters:function(e,t){var r=1<arguments.length&&void 0!==t?t:"Default";try{var a=this.getRequest(e);if(a){var n={};if("FullData"!=r)for(var o in a.parameters)n[o]=this.getRequestParameter(e,o,r);else n=a.parameters;return n}return!1}catch(e){return console.error("requests.".concat(arguments.callee.name," Error: ").concat(e)),!1}},setRequestParameter:function(e,t,r,a){var n=2<arguments.length&&void 0!==r?r:null,o=3<arguments.length&&void 0!==a&&a,s=ShiftCodesTK.requests.savedRequests;try{var u=s.getAllRequestParameters(e,"FullData")||{},i=void 0===u[t]?"add":"update";if("add"==i)u[t]={value:n,defaultValue:n,isReadOnly:o};else if("update"==i){var l=u[t];if(l.isReadOnly)throw'Parameter "'.concat(t,'" is read-only.');l.value=n}return s.getAllRequestParameters(e)}catch(e){return console.error("requests.savedRequests.".concat(arguments.callee.name," Error: ").concat(e)),!1}},getResultData:function(e){try{var t=this.getRequest(e,!0).results;if(void 0===t)throw'Request "'.concat(e,'" has no result data.');return t}catch(e){return console.error("requests.savedRequests.".concat(arguments.callee.name," Error: ").concat(e)),!1}},syncControls:function(e){var t=ShiftCodesTK.requests,r=ShiftCodesTK.forms;try{var a=this.getRequest(e,!0),n=!1;if("pagination"!=a.configuration.type)throw"Controls cannot be synced for ".concat(ucWords(a.configuration.type)," Requests.");var o=a.configuration.controls;if(!o)throw'No controls have been assigned to Request "'.concat(e,'".');if(o.sortAndFilter){var s=t.savedRequests.getAllRequestParameters(e);for(var u in s){var i=s[u],l=r.getField(o.sortAndFilter,u);l&&r.updateField(Array.isArray(l)?l[0]:l,null!==i?i:"",{source:"RequestControlsSync"})&&(n=!0)}}if(o.pager){var c=t.savedRequests.getResultData("FetchShiftCodes"),d={limit:c.maxChunkSize,page:c.currentChunk,total:c.totalChunks};if(-1!=Object.values(d).indexOf(null))throw'The Pager for "'.concat(e,'" could not be updated. The value for "').concat(Object.keys(d)[Object.values(d).indexOf(null)],'" was not found.');var f={now:d.page,max:0<d.limit?Math.ceil(d.total*d.limit/d.limit):1};console.log(o.pager,d,f);var v=updatePagerProps(o.pager,f),n=n||v}if(!n)throw'No controls have been assigned to Request "'.concat(e,'".');return!0}catch(e){return console.error("requests.savedRequests.".concat(arguments.callee.name," Error: ").concat(e)),!1}},syncQueryParams:function(e,t){var r,a,n,o,s,u,i=1<arguments.length&&void 0!==t?t:"query",l=this.getRequest(e,!0),c=this.getAllRequestParameters(e,"FullData"),d=this.setRequestParameter,f=getQueryParameters();if("query"==i){for(var v in c)u=void 0,u=c[s=v],function(){if(!u.isReadOnly&&!(Array.isArray(u.value)?function(){var e,t=_createForOfIteratorHelper(u.value);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(-1==u.defaultValue.indexOf(r))return!1}}catch(e){t.e(e)}finally{t.f()}var a,n=_createForOfIteratorHelper(u.defaultValue);try{for(n.s();!(a=n.n()).done;){var o=a.value;if(-1==u.value.indexOf(o))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}():u.value===u.defaultValue))return!0;return!1}()?f[s]=u.value:void 0!==f[s]&&(f[s]=null);return updateQueryParameters(f,l.configuration.syncParameters),f}if("params"!=i)return!1;for(var p in c)o=n=a=void 0,n=c[r=p],o=(a=f[r])&&-1!=["limit","page"].indexOf(r)?tryParseInt(a):a,n.isReadOnly||(void 0!==o&&o!=n.value?d("FetchShiftCodes",r,o):void 0===o&&d("FetchShiftCodes",r,n.defaultValue));return this.props}},requestEvents:{prefix:"tkRequests",eventList:{RequestDispatched:["request","originalEvent","timestamp","timestampStart","timeEnlapsed"],RequestLoading:["request","originalEvent","timestamp","timestampStart","timeEnlapsed","totalSize","downloadedSize","downloadedPercentage"],RequestCompleted:["request","originalEvent","timestamp","timestampStart","timestampEnd","timeEnlapsed","totalSize","downloadedSize","downloadedPercentage","resultState","resultResponse","resultResponseObject","resultStatusCode","resultStatusText"],RequestCancelled:["request","originalEvent","timestamp","timestampStart","timestampEnd","timeEnlapsed","totalSize","downloadedSize","downloadedPercentage","resultState"]},dispatchRequestEvent:function(o,s,e){var t=2<arguments.length&&void 0!==e&&e;try{var u=ShiftCodesTK.requests.requestEvents;if(-1==Object.keys(u.eventList).indexOf(o))throw'"'.concat(o,'" is not a valid Request Event name');var r=function(){var e,t=["totalSize","downloadedSize","downloadedPercentage"],r={},a=_createForOfIteratorHelper(u.eventList[o]);try{for(a.s();!(e=a.n()).done;){var n=e.value;void 0!==s[n]?r[n]=s[n]:(r[n]=null,-1==t.indexOf(n)&&console.warn('requestEvents.dispatchRequestEvent Warning: The argument property "'.concat(n,'" was not provided.')))}}catch(e){a.e(e)}finally{a.f()}return r}();return dispatchCustomEvent({event:{target:window,name:"".concat(u.prefix).concat(o),source:t},options:{bubbles:!0,cancelable:!1},customProperties:{requestEventData:r}})}catch(e){return console.error("requestEvents.".concat(arguments.callee.name," Error: ").concat(e)),!1}}},request:function(p){var e,t,m=1<arguments.length&&void 0!==arguments[1]&&arguments[1],q=ShiftCodesTK.requests;try{function r(e){var t=0<arguments.length&&void 0!==e?e:null;n.open(y.type,y.path,!0),function(){var e=y.headers;for(var t in e){var r=e[t];try{n.setRequestHeader(t,r)}catch(e){console.warn("requests.".concat(arguments.callee.name,' Warning: "').concat(t,'" is not a valid header or "').concat(r,'" is not a valid header value.\r\n').concat(e));continue}}}(),n.send(t)}var n=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHttp");throw ShiftCodesTK.toasts.newToast({settings:{id:"cannot_perform_ajax_request_error",duration:"infinite"},content:{title:"Cannot Perform Request",body:"Your browser does not support asynchronous requests. You will be unable to use some features of ShiftCodesTK until you use a more updated browser."}}),"An Asynchronous Request Object could not be found."}(),h=randomTimestampID(),g="string"==typeof p&&q.savedRequests.getRequest(p,!0),y=function(){var e=function(){var s={};if(g){for(var e in g.configuration.request){var t=g.configuration.request[e];null!==t&&(s[e]=t)}!function(){var e=q.savedRequests.getRequest(p),t=e.configuration.request.params,r=e.parameters;if(r){var a={};for(var n in r){var o=r[n];null!==o.value&&(a[n]=o.isReadOnly?o.defaultValue:o.value)}s.parameters=a}t&&(s.parameters=mergeObj(s.parameters,t))}()}else{if("object"!=_typeof(p))throw"Provided request is not a valid Saved Request Name String or Request Properties Object: ".concat(p);s=p}return mergeObj(q.DEFAULT_REQUEST_PROPERTIES,s)}();if(e.type=e.type.toUpperCase(),"POST"!=e.type||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/x-www-form-urlencoded"),e.headers[requestToken.headerName]=requestToken.get(),null===e.path)throw"A resource path was not provided.";if(-1==["GET","POST"].indexOf(e.type))throw'"'.concat(e.type,'" is not a valid request type.');return e}();return function(){function e(e){var t,r,a=moment().valueOf(),n=e.target,o=e.type,s="loadstart"==o?"RequestDispatched":-1!=["load","progress"].indexOf(o)?"RequestLoading":-1!=["abort","error","timeout"].indexOf(o)?"RequestCancelled":"loadend"==o?"RequestCompleted":void 0,u=(t={request:e.target,requestProperties:y,originalEvent:e,timestamp:a},void 0!==n.requestEventData?t.timestampStart=n.requestEventData.timestampStart:t.timestampStart=a,t.timeEnlapsed=a-t.timestampStart,-1!=["RequestCancelled","RequestCompleted"].indexOf(s)&&(t=mergeObj(t,{timestampEnd:moment().valueOf(),resultState:"RequestCompleted"==s})),e.lengthComputable&&(t=mergeObj(t,{totalSize:e.total,downloadedSize:e.loaded,downloadedPercentage:Math.round(e.loaded/e.total*100)})),"RequestCompleted"==s&&(t=mergeObj(t,{resultResponse:n.responseText,resultResponseObject:tryJSONParse(n.responseText,"ignore"),resultStatusCode:n.status,resultStatusText:n.statusText})),t);if(e.requestEventData=u,n.requestEventData=u,q.requestEvents.dispatchRequestEvent(s,u),"RequestDispatched"==s&&(q.activeRequests.addRequest(h,n),g&&(g.activeRequest=h)),-1!=["RequestCancelled","RequestCompleted"].indexOf(s)){if(q.activeRequests.removeRequest(h),g){var i={};for(var l in u)0==l.indexOf("result")&&(i[l]=u[l]);try{var c=u.resultResponseObject.payload.result_set;if(c)for(var d in c){var f=c[d],v=d.replaceAll(/_(\w)/g,function(e,t){return t.toUpperCase()});void 0!==g.results[v]&&(g.results[v]=f)}}catch(e){}g.results.lastResult=i,g.activeRequest=!1,"pagination"==g.configuration.type&&g.configuration.controls.syncControls&&q.savedRequests.syncControls(p)}"RequestCompleted"==s?(401!=u.resultStatusCode||(r=tryJSONParse(u.resultResponse,"ignore"))&&("Missing or Invalid Request Token"!=r.statusMessage||m||requestToken.check(function(r,a){return y.headers[requestToken.headerName]=r,function(){var e=y.parameters;for(var t in e){-1!=t.indexOf("token")&&e[t]==a&&(e[t]=r)}}(),q.request(y,!0)})),"function"==typeof y.callback&&y.callback(y.parseResultJSON?u.resultResponseObject:u.resultResponse,u)):"RequestCancelled"==s&&y.callback(null,u)}}for(var t=0,r=["abort","error","load","loadend","loadstart","progress","timeout"];t<r.length;t++){var a=r[t];n.addEventListener(a,e)}}(),t=encodeQueryParameters(y.parameters,!1),g&&(!g.activeRequest||(e=q.activeRequests[e])&&e.abort()),"GET"==y.type?(m||(y.path+="?".concat(t)),r()):"POST"==y.type&&r(t),h}catch(e){return console.error("requests.".concat(arguments.callee.name," Error: ").concat(e)),!1}}},setTimeout(function(){var v=ShiftCodesTK.requests,p=v.savedRequests;window.addEventListener("tkFormsFormBeforeSubmit",function(e){var t=e.formEventData,r=t.form,a=t.formData,n=p.getAllRequests(),o=!1;for(var s in n){var u=p.getRequest(s);if(u){var i=p.getAllRequestParameters(s),l=u.configuration.controls;if(u.configuration.controls&&l.sortAndFilter==r){for(var c in a){var d,f=c.replace(/\[\]$/,"");void 0!==i[f]&&(null!==(d=a[c])?(o=!0,p.setRequestParameter(s,f,d)):p.setRequestParameter(s,f,p.getRequestParameter(s,f,"FullData").defaultValue))}o&&(p.setRequestParameter(s,"page",1),u.configuration.syncParameters&&p.syncQueryParams(s,"query"),l.syncControls&&p.syncControls(s),v.request(s))}}}}),window.addEventListener("popstate",function(e){var t=p.getAllRequests();for(var r in t){t[r].configuration.syncParameters&&(p.syncQueryParams(r,"params"),v.request(r))}})},50))},50)}();