function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);function o(){}var a=0;return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,n=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}!function(){ShiftCodesTK.forms={},ShiftCodesTK.forms.isLoaded=!1;var r=setInterval(function(){var e,t,a;"undefined"!=typeof globalFunctionsReady&&(clearInterval(r),ShiftCodesTK.forms={isLoaded:!1,changeAttributes:((a={changeList:["disabled","hidden","readonly","required","value"],baseAttr:"data-${attribute}-changed-by"}).attrList=function(){var e,t={},r=_createForOfIteratorHelper(a.changeList);try{for(r.s();!(e=r.n()).done;){var o=e.value;t[o]=a.baseAttr.replace("${attribute}",o)}}catch(e){r.e(e)}finally{r.f()}return t}(),a),defaultAlertMessages:(e=dom.find.id("data"),t=dom.find.child(e,"class","form-default-alert-messages"),tryJSONParse(t.innerHTML)),templates:{alert:dom.find.id("form_alert_template"),charCounter:dom.find.id("form_character_counter_template")},validationTimeouts:{},hooks:{form:{beforeResetConfirmation:{},afterResetConfirmation:{},beforeReset:{},afterReset:{},beforeSubmitConfirmation:{},afterSubmitConfirmation:{},beforeSubmit:{},afterSubmit:{}},field:{change:{},timeout:{},commit:{}}},formEvents:{prefix:"tkForms",eventList:{FormBeforeResetConfirmation:["form","formData","formProps","originalEvent","confirmationModal"],FormAfterResetConfirmation:["form","formData","formProps","originalEvent","confirmationModal","confirmationResult"],FormBeforeReset:["form","formData","formProps","originalEvent"],FormAfterReset:["form","formData","formProps","originalEvent"],FormBeforeSubmitConfirmation:["form","formData","formProps","originalEvent","confirmationModal"],FormAfterSubmitConfirmation:["form","formData","formProps","originalEvent","confirmationModal"],FormBeforeSubmit:["form","formData","formProps","originalEvent"],FormAfterSubmit:["form","formData","formProps","originalEvent","formResponseData"],FieldChange:["field","fieldValue","fieldProps","originalEvent"],FieldTimeout:["field","fieldValue","fieldProps","originalEvent"],FieldCommit:["field","fieldValue","fieldProps","originalEvent"]},dispatchFormEvent:function(r,n,a,e){var o=3<arguments.length&&void 0!==e&&e,i=ShiftCodesTK.forms;return i.handleMethod(function(){var e=-1!=["FormBeforeResetConfirmation","FormBeforeReset","FormBeforeSubmitConfirmation","FormBeforeSubmit","FormAfterSubmit"].indexOf(n),t=function(){var e,t={},r=_createForOfIteratorHelper(i.formEvents.eventList[n]);try{for(r.s();!(e=r.n()).done;){var o=e.value;void 0!==a[o]?t[o]=a[o]:t[o]=null}}catch(e){r.e(e)}finally{r.f()}return t}();return dispatchCustomEvent({event:{target:r,name:"".concat(i.formEvents.prefix).concat(n),source:o},options:{bubbles:!0,cancelable:e},customProperties:{formEventData:t}})},arguments,{target:{condition:function(e){return e&&void 0!==e.className},message:'"'.concat(r,'" is not a valid element.')},eventName:{condition:function(e){return e&&-1!=Object.keys(i.formEvents.eventList).indexOf(e)},message:'"'.concat(n,'" is not a valid event name.')},args:[{condition:function(e){return e&&"object"==_typeof(e)},message:'"'.concat(a,'" is not a valid arguments object.')},{condition:function(e){var t,r=!1,o=_createForOfIteratorHelper(i.formEvents.eventList[n]);try{for(o.s();!(t=o.n()).done;){var a=t.value;void 0!==e[a]?r=!0:console.warn('formEvents.dispatchFormEvent Warning: The argument property "'.concat(a,'" was not provided.'))}}catch(e){o.e(e)}finally{o.f()}return r},message:"No valid arguments were provided."}],source:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||"string"==typeof t},message:'"${arg}" is not a valid value for the source.'}},null)}},handleMethod:function(r,u,e,t){var m=2<arguments.length&&void 0!==e?e:{},o=3<arguments.length&&void 0!==t&&t;try{var a=function(){var f={form:[{condition:function(e){return void 0!==e&&void 0!==e.tagName&&dom.has(e,"tag","form")},message:"A valid form must be provided."},{condition:function(e){return!!dom.has(e,"class","configured")||(dom.has(e,"class","no-auto-config")?(console.warn('Form was not configured due to "no-auto-config" flag.'),!1):ShiftCodesTK.forms.setupForm(e))},message:"Form has not been properly configured."}],field:{condition:function(e){return void 0!==e&&void 0!==e.tagName&&dom.has(e,"class","input")},message:"A valid field must be provided."},element:[{condition:function(e){return-1!=e.constructor.name.search(new RegExp("HTML(\\w+){0,1}Element"))},message:"The provided element is not a valid element."},{condition:function(e){var t=dom.has(e,"tag","form")&&dom.has(e,"class","configured"),r=(parent=dom.find.parent(e,"tag","form"),!(!parent||!dom.has(parent,"class","configured")));return t||r},message:"The provided element is not a form or the child of a form."}]},c=Object.keys(m);globalFuncStats.record("forms".concat(ucWords(u.callee.name)));for(var e=0;e<c.length;e++)!function(e){var r,t,o,a=c[e],n=u[e];function i(e){var t=[],t="Array"==e.constructor.name?e:[e];r=r.concat(t)}var s,d=_createForOfIteratorHelper((r=[],t=f[a],o=m[a],void 0!==t&&i(t),void 0!==o&&0<Object.keys(o).length&&i(o),r));try{for(d.s();!(s=d.n()).done;){var l=s.value;if(!l.condition(n))throw l.message.replace("${arg}",n)}}catch(e){d.e(e)}finally{d.f()}}(e);var t=r.apply(void 0,_toConsumableArray(Object.values(u)));return globalFuncStats.record("forms".concat(ucWords(u.callee.name)),!0,t),{v:t}}();if("object"===_typeof(a))return a.v}catch(e){return console.error("forms.".concat(u.callee.name," Error: ").concat(e)),globalFuncStats.record("forms".concat(ucWords(u.callee.name)),!1),o}},getProps:function(h,e){var v=1<arguments.length&&void 0!==e&&e;return this.handleMethod(function(){var e,t,r,o,a,n=ShiftCodesTK.forms,i=function(){if(dom.has(h,"tag","form"))return"form";if(dom.has(h,"class","input"))return"field";if(dom.has(h,"attr","data-nested")){if(dom.has(h,"class","section"))return"section";if(dom.has(h,"class","group"))return"group"}return!1}();function s(e){return v?e():null}if(i){var d,l,f,c,u,m={elementType:i,info:{},states:{hidden:h.hidden||!1!==dom.find.parent(h,"attr","hidden")}};return"field"!=i&&"group"!=i||(m.containers={field:dom.find.parent(h,"class","field"),fieldset:dom.find.parent(h,"tag","fieldset"),group:s(function(){return dom.find.parent(h,"class","children group")}),section:s(function(){return dom.find.parent(h,"class","section")})}),"field"!=i&&(m.children={},m.children.fields=s(function(){return dom.find.children(h,"group","inputs")}),m.children.buttons=s(function(){return dom.find.children(h,"group","clickables")})),"form"==i?(m.info.name=dom.get(h,"attr","data-form-name"),m.info.type=!1!==(e=dom.get(h,"attr","data-action-type"))?e:"ajax",m.info.action=(t=dom.get(h,"attr","action"),r=dom.get(h,"attr","data-action-path"),t&&"#"!=t?t:r||!1),m.info.method=!(o={get:"GET",post:"POST",dialog:"Dialog"})!==(a=dom.get(h,"attr","method"))&&(a=a.toLowerCase(),-1!=Object.keys(o).indexOf(a))?o[a]:o.post,function(){m.states.isModified=dom.has(h,"attr","modified"),m.states.isValid=!dom.has(h,"class","invalid")&&!0===this.validateForm(h,!1),m.states.canSubmit="js"!=m.info.type&&!1!==m.info.path,m.states.willSubmit=m.states.canSubmit&&m.states.isValid}.bind(this)()):"field"==i?(d=dom.get(h,"attr","name"),l=dom.get(h,"tag"),f="select"==l||"textarea"==l?l:dom.get(h,"attr","type"),c=-1!=["radio","checkbox","select"].indexOf(f)?"multi":"single",u="multi"==c?"select"==f?dom.find.children(h,"tag","option"):n.getField(h.form,d):[],m.info.tag=l,m.info.type=f,m.info.category=c,m.info.name=d,m.info.value=function(){if("textarea"==m.info.type&&""==h.value)return h.innerHTML;if("select"!=m.info.type)return h.value;var e,t=_createForOfIteratorHelper(u);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.selected)return r.value}}catch(e){t.e(e)}finally{t.f()}return""}(),m.info.defaultValue=function(){if("multi"!=m.info.category)return h.defaultValue;if("select"!=m.info.type)return h.defaultChecked;var e,t=_createForOfIteratorHelper(u);try{for(t.s();!(e=t.n()).done;){if(e.value.defaultSelected)return h.value}}catch(e){t.e(e)}finally{t.f()}}(),function(){m.states.disabled=h.disabled||!1!==dom.find.parent(h,"attr","disabled"),m.states.readonly=h.readOnly||dom.has(h,"attr","readonly"),m.states.isModified=function(){if("multi"!=m.info.category)return m.info.value!=m.info.defaultValue;if("select"!=m.info.type){if(u){var e,t=_createForOfIteratorHelper(u);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked!=r.defaultChecked)return!0}}catch(e){t.e(e)}finally{t.f()}}return!1}var o,a=!1,n=_createForOfIteratorHelper(u);try{for(n.s();!(o=n.n()).done;){var i=o.value;if(i.defaultSelected&&(a=!0,!i.selected))return!0}}catch(e){n.e(e)}finally{n.f()}return!a&&!1===options[0].selected}(),m.states.hasValue=""!=m.info.value,m.states.isValid=!dom.has(m.containers.fieldset,"class","invalid")&&!0===this.validateField(h),m.states.canSubmit=!m.states.disabled&&m.states.isValid,m.states.willSubmit=function(){var e=m.info.type;if(m.states.canSubmit)if("radio"==e||"checkbox"==e){if(h.checked)return!0}else if("select"==e){var t,r=_createForOfIteratorHelper(u);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.selected&&""!=o.value)return!0}}catch(e){r.e(e)}finally{r.f()}}else if(0<h.value.trim().length)return!0;return!1}()}.bind(this)()):"section"!=i&&"group"!=i||(m.info.name=dom.get(h,"attr","data-nested"),m.disabled=dom.has(h,"class","disabled")),m}return!1}.bind(this),arguments,{element:[{condition:function(e){return dom.has(e,"tag","form")||dom.has(e,"class","input")&&!dom.has(e,"tag","fieldset")||dom.has(e,"attr","data-nested")},message:"The provided element is not a valid form, field, group, or section."}]})},getField:function(e,t){return this.handleMethod(function(a,e){function n(e,t){var r=1<arguments.length&&void 0!==t?t:"name",o=dom.find.children(a,"attr",r,e);return 0<o.length?1<o.length||-1!=e.indexOf("[]")?o:o[0]:-1==e.indexOf("[]")&&"data-nested"!=r&&n(e,"data-nested")}var t;return((t=n(e))||!!(t=n("".concat(e,"[]"))))&&t},arguments,{form:{},name:{condition:function(e){return void 0!==e&&0<e.trim().length},message:'"${arg}" is not a valid field name.'}})},getChangeAttribute:function(e,t){var u=this;return this.handleMethod(function(o){var e,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=(e=new RegExp(u.changeAttributes.baseAttr.replace("${attribute}","(\\w+)"),"g"),_toConsumableArray(o.outerHTML.matchAll(e)));function a(e){var t=dom.get(o,"attr",e);if(t){var r=tryJSONParse(t);if(r)return r;console.error('Change Attribute "'.concat(e,'" was not formatted properly:\r\n"').concat(t,'"'))}return!1}if(0<r.length){if(!1===t){var n,i={},s=_createForOfIteratorHelper(r);try{for(s.s();!(n=s.n()).done;){var d=n.value,l=d[1],f=a(d[0]);f&&(i[l]=f)}}catch(e){s.e(e)}finally{s.f()}return i}var c=a(u.changeAttributes.attrList[t]);if(c)return c}return!1}.bind(this),arguments,{element:{},attribute:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return validOptions=u.changeAttributes.changeList.concat([!1]),-1!=validOptions.indexOf(t)},message:'"${arg}" is not a valid attribute name.'}},null)},updateChangeAttribute:function(a,n,e,t){var i=2<arguments.length&&void 0!==e?e:"add",s=3<arguments.length&&void 0!==t&&t,d=this;return this.handleMethod(function(){var e="value"!=n?dom.has(a,"attr",n):d.getProps(a).info.value,t=d.changeAttributes.attrList[n],r=d.getChangeAttribute(a,n);if("add"!=i||!1!==r)return"remove"==i&&!1!==r&&(edit.attr(a,"remove",t),!0);var o={source:s,originalValue:e};return edit.attr(a,"list",t,JSON.stringify(o)),!0}.bind(this),arguments,{element:{},attribute:{condition:function(e){return-1!=d.changeAttributes.changeList.indexOf(e)},message:'"${arg}" is not a valid attribute name.'},type:{condition:function(e){return-1!=["add","remove"].indexOf(0<arguments.length&&void 0!==e?e:"add")},message:'"${arg}" is not of a valid type.'},source:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||"string"==typeof t},message:'"${arg}" is not a valid value for the source.'}},null)},registerHook:function(e,t,r){return this.handleMethod(function(){return console.warn('Warning! forms.registerHook has been deprecated! Use "tkForms" Event Listeners instead.\r\n\r\n',arguments),!1}.bind(this),arguments,{target:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||"string"==typeof t},message:'"${arg}" is not a valid value for the target.'},trigger:{condition:function(e){return validTriggers=["beforeReset","afterReset","beforeSubmit","afterSubmit","change","timeout","commit"],-1!=validTriggers.indexOf(e)},message:'"${arg}" is not a valid trigger.'},callback:{condition:function(e){return"function"==typeof e},message:"Provided callback is not a function."}},null)},invokeHooks:function(e,t){for(var r=arguments.length,o=new Array(2<r?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return this.handleMethod(function(){return console.warn("Warning! forms.invokeHooks has been deprecated! This code can be safely removed.",arguments),!1}.bind(this),arguments,{target:{condition:function(e){return"string"==typeof(0<arguments.length&&void 0!==e&&e)},message:'"${arg}" is not a valid value for the target.'},trigger:{condition:function(e){return validTriggers=["beforeReset","afterReset","beforeSubmit","afterSubmit","change","timeout","commit"],-1!=validTriggers.indexOf(e)},message:'"${arg}" is not a valid trigger.'}},null)},setupForm:function(e){return this.handleMethod(function(a){edit.class(a,"add","configured");var e,t=this.getProps(a,!0);""==a.id&&(a.id=randomID("form_")),(e=dom.get(a,"attr","data-action-path"))&&"js"!=dom.get(a,"attr","data-action-type")&&(edit.attr(a,"update","action",e),edit.attr(a,"remove","data-action-path")),this.toggleFormDetails(a,!dom.has(a,"class","hide-details"));var r,o=_createForOfIteratorHelper(t.children.fields);try{for(o.s();!(r=o.n()).done;){var n=r.value;!n.readOnly&&dom.has(n,"attr","minLength")||dom.has(n,"attr","maxLength"),this.checkController(n)}}catch(e){o.e(e)}finally{o.f()}return function(){var e=dom.get(a,"attr","data-require-modify");if(e)for(var t=0,r=["reset","submit"];t<r.length;t++){var o=r[t];-1!=e.indexOf(o)&&this.togglePrimaryFormControls(a,o,!1,"requiresModify")}}.bind(this)(),this.updateFormValidationState(a),a}.bind(this),arguments,{form_:{condition:function(e){return dom.has(e,"tag","form")},message:"Provided element is not a form."}})},setupChildForms:function(i){return this.handleMethod(function(e){try{var t,r=dom.find.children(i,"tag","form"),o=[],a=_createForOfIteratorHelper(r);try{for(a.s();!(t=a.n()).done;){var n=t.value;dom.has(n,"class","configured")||dom.has(n,"class","no-auto-setup")||(formSetupResult=this.setupForm(n),formSetupResult?o.push(formSetupResult):console.warn("form.setupChildForms Warning: Failed to setup form: ",n))}}catch(e){a.e(e)}finally{a.f()}return o}catch(e){return console.error("layers.setupChildLayers Error: ".concat(e)),!1}}.bind(this),arguments,{parent:{condition:function(e){return void 0!==e&&e},message:"Provided parent is not a valid element."}})},toggleForm:function(l){return this.handleMethod(function(){var t=ShiftCodesTK.forms,r={};r.attrName=t.changeAttributes.attrList.disabled,r.labelName="disabled-form",r.value=dom.get(l,"attr",r.attrName);var e=t.getProps(l,!0),o=r.value&&-1!=r.value.indexOf(r.labelName);function a(e){t.updateChangeAttribute(e,"disabled",o?"remove":"add",r.labelName)}a(l),isDisabled(l,!o);var n,i=_createForOfIteratorHelper(e.children.fields);try{for(i.s();!(n=i.n()).done;){var s=n.value,d=dom.get(s,"attr",r.attrName);!dom.has(s,"tag","a")&&(!o&&!s.disabled||o&&!1!==d&&-1!=d.indexOf(r.labelName))&&(dom.has(s,"class","input")?t.toggleField(s,{disabled:!o},r.labelName):(a(s),isDisabled(s,!o)))}}catch(e){i.e(e)}finally{i.f()}return o},arguments,{form:{}},null)},togglePrimaryFormControls:function(i,e,t,r){var s=1<arguments.length&&void 0!==e?e:"both",d=2<arguments.length&&void 0!==t?t:"toggle",l=3<arguments.length&&void 0!==r&&r;return this.handleMethod(function(){for(var e=!1,t=0,r=["reset","submit"];t<r.length;t++)if(type=r[t],s==type||"both"==s){var o,a=_createForOfIteratorHelper(dom.find.children(i,"attr","type",type));try{for(a.s();!(o=a.n()).done;){var n=o.value;isDisabled(n,!d),this.updateChangeAttribute(n,"disabled",d?"remove":"add",!1!==l?l:"controlToggle"),e=!0}}catch(e){a.e(e)}finally{a.f()}}return e}.bind(this),arguments,{form:{},controls:{condition:function(e){return-1!=["both","reset","submit"].indexOf(0<arguments.length&&void 0!==e?e:"both")},message:'"${arg}" is not a valid value for the "controls" argument.'},state:{condition:function(e){return-1!=[!0,!1,"toggle"].indexOf(0<arguments.length&&void 0!==e?e:"toggle")},message:'"${arg}" is not a valid value for the "state" argument.'},source:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||"string"==typeof t},message:'"${arg}" is not a valid value for the source.'}},null)},toggleFormDetails:function(n,e,t){var i=1<arguments.length&&void 0!==e?e:"toggle",s=2<arguments.length&&void 0!==t&&t;return this.handleMethod(function(){var t="toggle"!=i?i:dom.has(n,"class","hide-details");function e(e){return e.replace(t?"Show":"Hide",t?"Hide":"Show")}var r,o=_createForOfIteratorHelper(dom.find.children(n,"class","form-details-toggle"));try{for(o.s();!(r=o.n()).done;){var a=r.value;edit.class(n,t?"remove":"add","hide-details"),a.innerHTML=e(a.innerHTML),updateLabel(a,e(dom.get(a,"attr","aria-label")),["aria","tooltip"])}}catch(e){o.e(e)}finally{o.f()}return s&&(s.blur(),s.focus()),!0},arguments,{form:{},state:{condition:function(e){return-1!=[!0,!1,"toggle"].indexOf(0<arguments.length&&void 0!==e?e:"toggle")},message:'"${arg}" is not a valid value for the "state" argument.'},toggler:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||void 0!==t.constructor&&"HTMLButtonElement"==t.constructor.name&&dom.has(t,"class","form-details-toggle")},message:"The provided toggler is not a valid Details-Toggle Button."}},!1)},updateField:function(u,m,e){var h=2<arguments.length&&void 0!==e?e:{};return this.handleMethod(function(){var e=u.form,t=this.getProps(u),r=null!=m&&m.constructor.name.toLowerCase();this.getChangeAttribute(u,"value");function o(e,t){return!h.suppressEvents&&dispatchCustomEvent({event:{target:e,name:t,source:void 0!==h.source?h.source:"updateField"},options:{bubbles:!0}})}if(!function(){if("array"==r&&("multi"!=t.info.category||"radio"==t.info.type||"select"==t.info.type&&!dom.has(u,"attr","multiple")))throw'Arrays are only permitted as values for Checkbox or Select fields with the "multiple" attribute.';if(!1===e)throw"Field is not associated with a valid form."}(),function(){var e=this.getChangeAttribute(u,"value");!1!==e&&e.originalValue!=m||this.updateChangeAttribute(u,"value",!1===e?"add":"remove",h.source)}.bind(this)(),"single"==t.info.category)u.value=m,h.updateDefault&&(u.defaultValue=m),o(u,"input");else{var a="select"==t.info.type?u.options:dom.find.children(e,"attr","name",u.name);if("select"==t.info.type){var n,i=_createForOfIteratorHelper(a);try{for(i.s();!(n=i.n()).done;){var s=n.value;s.selected=!1,h.updateDefault&&edit.attr(s,"remove","selected")}}catch(e){i.e(e)}finally{i.f()}}var d,l=_createForOfIteratorHelper(a);try{for(l.s();!(d=l.n()).done;){var f=d.value,c="string"==r?f.value==m:-1!=m.indexOf(f.value);"select"==t.info.type&&c?(f.selected=!0,h.updateDefault&&edit.attr(f,"add","selected")):(f.checked=c,h.updateDefault&&(f.defaultChecked=c)),c&&o(f,"change")}}catch(e){l.e(e)}finally{l.f()}}return!0}.bind(this),arguments,{field:{},newValue:{condition:function(e){return null!=e&&("string"==typeof e||"number"==typeof e||Array.isArray(e))},message:'"${arg}" is not a valid field value.'},options:[{condition:function(e){for(var t=0<arguments.length&&void 0!==e?e:{},r=["updateDefault","source","suppressEvents"],o=0,a=Object.keys(t);o<a.length;o++){var n=a[o];-1==r.indexOf(n)&&console.warn('forms.updateField Warning: "'.concat(n,'" is not a valid option.'))}return"object"==_typeof(t)},message:"Options must be provided as an object."},{condition:function(e){var t=0<arguments.length&&void 0!==e?e:{};return void 0===t.updateDefault||"boolean"==typeof t.updateDefault},message:'The "updateDefault" option must be a boolean.'},{condition:function(e){var t=0<arguments.length&&void 0!==e?e:{};return void 0===t.source||(!1===t.source||"string"==typeof t.source)},message:'The "source" option must be FALSE or a string.'},{condition:function(e){var t=0<arguments.length&&void 0!==e?e:{};return void 0===t.suppressEvents||"boolean"==typeof t.suppressEvents},message:'The "suppressEvents" option must be a boolean.'}]})},toggleField:function(p,y,e){var b=2<arguments.length&&void 0!==e&&e;return this.handleMethod(function(){for(var c=this,u=this.getProps(p,!0),m="field"==u.elementType&&"multi"==u.info.category&&"select"!=u.info.type&&this.getField(p.form,u.info.name),h="field"==u.elementType&&"multi"==u.info.category&&"select"!=u.info.type&&dom.find.parent(u.containers.field,"class","field"),v=0,g=["disabled","hidden","readonly","required"];v<g.length;v++)!function(){var e,o=g[v],t=u.containers?dom.has(u.containers.field,"class",o):dom.has(p,"class",o),a="toggle"!=y[o]?y[o]:1!=t;if(void 0!==a){var n=(e={true:"add",false:"remove"},"toggle"!=a?e[a]:e[dom.has(u.containers.field,o)==o]),r=c.getChangeAttribute(p,o);if(!1!==r&&r.originalValue!=a||c.updateChangeAttribute(p,o,!1===r?"add":"remove",b),"hidden"==o||"field"==u.elementType?edit.attr(p,n,o):edit.class(p,n,o),u.containers&&(edit.class(u.containers.field,n,o),u.info.type&&-1!=["checkbox","radio"].indexOf(u.info.type)||(edit.class(u.containers.fieldset,n,o),-1!=["disabled","hidden"].indexOf(o)&&edit.attr(u.containers.fieldset,n,o))),"field"==u.elementType)-1!=["disabled","hidden"].indexOf(o)&&function(){if(m){var e,t=_createForOfIteratorHelper(m);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(a&&!dom.has(r,"attr",o))return}}catch(e){t.e(e)}finally{t.f()}dom.has(h,"class",o)!==a&&edit.class(h,n,o)}}();else{var i,s=_createForOfIteratorHelper(u.children.fields);try{for(s.s();!(i=s.n()).done;){var d,l=i.value,f=c.getProps(l);dom.has(f.containers.field,"class",o)!=a&&((d={})[o]=a,c.toggleField(l,d,b),edit.class(f.containers.field,n,o))}}catch(e){s.e(e)}finally{s.f()}}}}();return!0}.bind(this),arguments,{_field:{condition:function(e){return void 0!==e&&void 0!==e.tagName&&(dom.has(e,"class","input")||dom.has(e,"attr","data-nested"))},message:"A valid field or field container must be provided."},states:{condition:function(e){return void 0!==e&&"Object"==e.constructor.name},message:"A valid object of states must be provided."},source:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||"string"==typeof t},message:'"${arg}" is not a valid value for the source.'}})},togglePasswordFieldVisibility:function(n,e){var i=1<arguments.length&&void 0!==e?e:"toggle";return this.handleMethod(function(){this.getProps(n);var e,t,r,o=dom.has(n,"attr","type","text"),a="toggle"!=i?i:!o;return a!=o&&(edit.attr(n,"update","type",{true:"text",false:"password"}[a]),e={true:"Hide",false:"Peek at"},t=dom.find.child(n.parentNode,"class","toggle-password-visibility"),r="Peek at the password".replace(e[!a],e[a]),updateLabel(t,r,["tooltip"]),!0)}.bind(this),arguments,{field:{condition:function(e){var t=dom.find.parent(e,"class","input-container");return t&&dom.has(t,"class","password")},message:"Field is not a password field."},states:{condition:function(e){return-1!=[!0,!1,"toggle"].indexOf(0<arguments.length&&void 0!==e?e:"toggle")},message:"A valid state value must be provided."}})},updateCharCounter:function(l){return this.handleMethod(function(){var e,t,r=this.getProps(l),o=function(){var e={};return e.counter=function(){var e=dom.find.child(r.containers.field,"class","toolbar"),t=dom.find.child(e,"class","character-counter");return t||(edit.class(r.containers.fieldset,"add","has-character-counter"),t=edit.copy(this.templates.charCounter),t=e.insertAdjacentElement("afterBegin",t)),t}.bind(this)(),e.now=dom.find.child(e.counter,"class","now"),e.threshold=dom.find.child(e.counter,"class","threshold"),e}.bind(this)(),a={min:!1!==(t=dom.get(l,"attr","minLength"))&&tryParseInt(t,"silent"),now:l.value.length,max:!1!==(e=dom.get(l,"attr","maxLength"))&&tryParseInt(e)};function n(e,t){edit.class(o.counter,e?"add":"remove","underflow"),edit.class(o.counter,t?"add":"remove","max")}function i(e){if(dom.has(o.counter,"class","visible")){var t={plural:checkPlural(a.now),min:[a.min,"required"],max:[a.max,"available"]};return updateLabel(o.counter,"<strong>".concat(a.now,"</strong> character").concat(t.plural," used out of <strong>").concat(t[e][0],"</strong> ").concat(t[e][1]),["tooltip"])}return 1}if(o.now.innerHTML=a.now,!1!==a.max&&!1!==a.min){if(a.now>=a.min||!1===a.min){var s=Math.round(1.25*a.min),d=Math.round(.75*a.max);return o.threshold.innerHTML=a.max,edit.class(o.counter,a.now<=s||a.now>=d?"add":"remove","visible"),i("max"),void(a.now<a.max?n(!1,!1):n(!1,!0))}if(!1!==a.max&&(a.min==a.max||a.now<a.min||!1===a.max))return n(!0,!1),o.threshold.innerHTML=a.min,edit.class(o.counter,"add","visible"),void i("min")}return!0}.bind(this),arguments,{field:{condition:function(e){var t=dom.get(e,"attr","type");return!1!==t&&-1!=["email","password","search","tel","text","textarea","url"].indexOf(t)},message:"Provided field must support the minLength and maxLength attributes."}})},checkController:function(i){var m=this;return this.handleMethod(function(){var o="data-has-control",u=i.form,a=!1;function e(e){var d=!1,t=dom.get(e,"attr",o);if(t){var l=tryJSONParse(t);if(l){var f=e==i?props:m.getProps(e);for(var r in l)!function(e){var t=l[e],c=void 0!==t.currentState&&t.currentState,r=f.info.value,o=f.states.willSubmit,a=t.condition,n=-1!=a.indexOf("Any")?"":a.replace(new RegExp("(has|not)Value:( ){0,1}"),"");if((-1!=a.indexOf("has")&&o&&(-1!=a.indexOf("Any")||r==n)||-1!=a.indexOf("not")&&-1!=a.indexOf("Any")&&(!o||r!=n))!=c){var i=t.controls;for(var s in i)!function(d){var f=function(){var e=new RegExp("\\[([-_, \\w\\d]+)\\]$"),t=d.match(e);if(!t)return m.getField(u,d);var r,o=m.getField(u,d.replace(e,"")),a=t[1].split(", "),n=[],i=_createForOfIteratorHelper(o);try{for(i.s();!(r=i.n()).done;){var s=r.value;-1!=a.indexOf(dom.get(s,"attr","value"))&&n.push(s)}}catch(e){i.e(e)}finally{i.f()}return n||!1}();f&&function(){function t(t){var e,r,o,a,n,i=m.getProps(t),s=c?"fieldControllerReverse":"fieldController";for(var d in l)n=a=o=r=void 0,"value"!=(e=d)?(r=l[e],(o={})[e]=c?!r:r,m.toggleField(t,o,s)):(a=function(){if("select"!=i.info.type)return t.defaultValue;var e=dom.find.child(t,"attr","selected");return e?e.value:""}(),n=c?a:l[e],"single"!=i.info.category&&t!=f[0]||m.updateField(t,n,{source:s}))}var l=i[d];if(Array.isArray(f)){var r,o=_createForOfIteratorHelper(f);try{for(o.s();!(r=o.n()).done;)!function(){var e=r.value;setTimeout(function(){return t(e)},10)}()}catch(e){o.e(e)}finally{o.f()}}else t(f)}()}(s);l[e].currentState=!c,d=!0}}(r);d&&(a=!0,edit.attr(e,"update",o,JSON.stringify(l)),m.updateFormCompletionPercentage(u))}}}if(props=m.getProps(i),"multi"==props.info.category&&"select"!=props.info.type){var t,r=_createForOfIteratorHelper(m.getField(i.form,props.info.name));try{for(r.s();!(t=r.n()).done;){var n=t.value;n!==i&&e(n)}}catch(e){r.e(e)}finally{r.f()}}return e(i),a&&m.updateFormValidationState(u),a}.bind(this),arguments,{field:{}},null)},checkDynamicValidations:function(o){var a="data-dynamic-validations",n=this;return this.handleMethod(function(){var r,e=o.form,l=n.getProps(o),t=_createForOfIteratorHelper(dom.find.children(e,"attr",a));try{for(t.s();!(r=t.n()).done;)!function(){var s=r.value,e=dom.get(s,"attr",a);if(-1!=e.search(new RegExp(l.info.name))){var d=tryJSONParse(e);if(d){for(var t in d)!function(e){var t=d[e],r=""!=l.info.value?l.info.value:!1!==t.default&&t.default;if(-1==e.search(new RegExp("range")))!1!==r?edit.attr(s,"update",e,r):edit.attr(s,"remove",e);else{function o(e){var t=-1!=["number","range","date","month","time","week"].indexOf(l.info.type)?e:"".concat(e,"Length");!1!==r?edit.attr(s,"update",t,r):edit.attr(s,"remove",t)}var a={"range-min":"min","range-is":["min","max"],"range-max":"max"};if("range-is"!=e)o(a[e]);else{var n,i=_createForOfIteratorHelper(a[e]);try{for(i.s();!(n=i.n()).done;){o(n.value)}}catch(e){i.e(e)}finally{i.f()}}}}(t)}}}()}catch(e){t.e(e)}finally{t.f()}}.bind(this),arguments,{field:{}},null)},resetField:function(i){var s=this;return this.handleMethod(function(){var e=s.getProps(i),t="";if("multi"!=e.info.category)t=e.info.defaultValue;else{var r,t=[],o=_createForOfIteratorHelper(s.getField(i.form,e.info.name));try{for(o.s();!(r=o.n()).done;){var a=r.value,n=s.getProps(a);n.info.defaultValue&&t.push(n.info.value)}}catch(e){o.e(e)}finally{o.f()}}return s.updateField(i,t,{source:"resetField"})}.bind(this),arguments,{field:{}},null)},addAlert:function(l,f,e,t){var c=2<arguments.length&&void 0!==e?e:"warning",u=3<arguments.length&&void 0!==t&&t;return this.handleMethod(function(){var t=dom.has(l,"tag","form")?l:l.form;if(dom.has(t,"class","hide-alerts"))return function(){var e={settings:{duration:"infinite"},content:{icon:"fas fa-exclamation-circle",title:"Form Issue",body:f},actions:[]};l!=t&&(e.settings.callback=function(e,t){var r=dom.find.parent(e,"class","actions");r&&l==r[0]&&l.focus()},e.actions.push({content:"Jump to Field",title:"Jump to the associated field"}));ShiftCodesTK.toasts.newToast(e)}(),!0;var e=l!=t&&dom.find.parent(l,"tag","fieldset"),r=this.getProps(l),o=l==t?dom.find.child(t,"class","alerts"):dom.find.child(e,"class","alerts"),a=function(){var e=edit.copy(this.templates.alert);return e.id=randomID("alert_"),edit.attr(e,"add","data-alert",c),!1!==u&&edit.attr(e,"add","data-alert-name",u),edit.class(dom.find.child(e,"class","icon").children[0],"add","fas ".concat({info:"fa-info-circle",warning:"fa-exclamation-triangle",error:"fa-exclamation-circle"}[c])),dom.find.child(e,"class","message").innerHTML=f,e}.bind(this)();if(l!=t){var n="multi"==r.info.category&&"select"!=r.info.type&&this.getField(t,r.info.name);if(n){var i,s=_createForOfIteratorHelper(n);try{for(s.s();!(i=s.n()).done;){var d=i.value;edit.attr(d,"list","aria-describedby",a.id)}}catch(e){s.e(e)}finally{s.f()}}else edit.attr(l,"list","aria-describedby",a.id);"info"!=c&&(edit.class(r.containers.field,"add","invalid ".concat(c)),edit.class(r.containers.fieldset,"add","invalid ".concat(c)))}return o.appendChild(a),!0}.bind(this),arguments,{target:{condition:function(e){return void 0!==e&&void 0!==e.tagName&&-1!=["form","input","select","textarea"].indexOf(dom.get(e,"tag"))},message:"The target must be a valid Form, Input, Select, or TextArea element."},message:{condition:function(e){return void 0!==e&&"string"==typeof e&&0<e.trim().length},message:"A valid alert message must be provided."},type:{condition:function(e){return-1!=["info","warning","error"].indexOf(0<arguments.length&&void 0!==e?e:"warning")},message:'The alert type must be one of "info", "warning", or "error".'},name:{condition:function(e){var t=0<arguments.length&&void 0!==e&&e;return!1===t||"string"==typeof t},message:'"${arg}" is not a valid value for the name.'}})},removeAlerts:function(u,e){var m=1<arguments.length&&void 0!==e?e:[];return this.handleMethod(function(){var e,t,r=dom.has(u,"tag","form")?u:u.form,o=this.getProps(u),a=0,n=_createForOfIteratorHelper((e=u==r?dom.find.child(r,"class","alerts"):dom.find.child(o.containers.fieldset,"class","alerts"),dom.find.children(e,"class","alert")));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(-1==m.indexOf(i)){var s=dom.get(i,"attr","data-alert-type");if(u!=r){var d="multi"==o.info.category&&"select"!=o.info.type&&this.getField(r,o.info.name);if(d){var l,f=_createForOfIteratorHelper(d);try{for(f.s();!(l=f.n()).done;){var c=l.value;edit.attr(c,"list","aria-describedby",i.id)}}catch(e){f.e(e)}finally{f.f()}}else edit.attr(u,"list","aria-describedby",i.id);"info"!=s&&edit.class(o.containers.fieldset,"remove","invalid ".concat(s))}deleteElement(i),a++}}}catch(e){n.e(e)}finally{n.f()}return a}.bind(this),arguments,{target:{condition:function(e){return void 0!==e&&void 0!==e.tagName&&-1!=["form","input","select","textarea"].indexOf(dom.get(e,"tag"))},message:"The target must be a valid Form, Input, Select, or TextArea element."},whitelist:{condition:function(e){var t=0<arguments.length&&void 0!==e?e:[];return void 0!==t&&"Array"==t.constructor.name||void 0===t},message:"Whitelist must be an array."}})},clearFormAlerts:function(r,e){var o=1<arguments.length&&void 0!==e?e:[],i=this;return this.handleMethod(function(){var e,a=this.getProps(r,!0),t=0;function n(e){e&&0<e.childNodes.length&&(i.removeAlerts(r,o),t++)}return n(e=dom.find.child(r,"class","alerts")),e&&0<e.childNodes.length&&i.removeAlerts(r,o),function(){var e,t=_createForOfIteratorHelper(a.children.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value,o=dom.find.parent(r,"tag","fieldset");o&&n(dom.find.child(o,"class","alerts"))}}catch(e){t.e(e)}finally{t.f()}}(),t}.bind(this),arguments,{form:{},whitelist:{condition:function(e){var t=0<arguments.length&&void 0!==e?e:[];return void 0!==t&&"Array"==t.constructor.name||void 0===t},message:"Whitelist must be an array."}})},validateField:function(e){return this.handleMethod(function(e){if(null==e.checkValidity||e.checkValidity())return!0;var t=[];if(null!=e.validity)for(var r in e.validity)"valid"!=r&&e.validity[r]&&t.push(r);return t},arguments,{field:{}},null)},validateForm:function(n,e){var i=!(1<arguments.length&&void 0!==e)||e;return this.handleMethod(function(){if(n.checkValidity())return!0;if(i){var e,t={},r=_createForOfIteratorHelper(dom.find.children(n,"group","inputs"));try{for(r.s();!(e=r.n()).done;){var o=e.value,a=this.validateField(o);!0!==a&&(t[o.name]=a)}}catch(e){r.e(e)}finally{r.f()}return t}return!1}.bind(this),arguments,{form:{},source:{condition:function(e){return"boolean"==typeof(!(0<arguments.length&&void 0!==e)||e)},message:'"${arg}" is not a valid value for "reportFieldIssues".'}},null)},reportFieldValidity:function(e){var m=ShiftCodesTK.forms;return this.handleMethod(function(i){var s,e=m.getProps(i),u=(e.info.tag,e.info.type),t=(e.info.category,m.validateField(i));return!0===t?m.removeAlerts(i):(s=m.validateField(i),delete m.validationTimeouts[i.name],!0!==s&&function(){var e,t,r,d=(e=dom.find.parents(i,"tag","fieldset"),(t=dom.find.parents(i,"class","size"))&1<t.length?e[1]:e[0]),o=dom.find.child(d,"class","alerts"),l={custom:function(){if(d){var e=dom.find.child(d,"class","alert-messages");return tryJSONParse(e.textContent,"silent")}return{}}(),default:m.defaultAlertMessages,internal:i.validationMessage},f=function(){var e={tooShort:"minLength",tooLong:"maxLength",rangeUnderflow:"min",rangeOverflow:"max"},t={};for(var r in e){var o=e[r],a=dom.get(i,"attr",o);!1!==a&&(t[r]=a)}return t}(),a=[],c=[],n=_createForOfIteratorHelper(s);try{for(n.s();!(r=n.n()).done;){if("break"===function(){var s=r.value;-1!=Object.keys(f).indexOf(s)&&((void 0!==f.tooShort&&f.tooShort==f.tooLong||void 0!==f.rangeUnderflow&&f.rangeUnderflow==f.rangeOverflow)&&(f.rangeMismatch=void 0!==f.tooShort?f.tooShort:f.rangeUnderflow,s="rangeMismatch"),"tooShort"==s?(f.rangeUnderflow=f.tooShort,s="rangeUnderflow"):"tooLong"==s&&(f.rangeOverflow=f.tooLong,s="rangeOverflow"));var e=function(){var e,t,r=((t={})["${field}"]=(e=o(d))||((e=o(dom.find.parent(d,"tag","fieldset")))?e:"this field"),t["${threshold}"]=void 0!==f[s]?f[s]:"  ",t["${plural}"]="  "!=t["${threshold}"]?checkPlural(t["${threshold}"]):"",t);function o(e){var t={title:"class",label:"tag",legend:"tag"};for(var r in t){var o=dom.find.child(e,t[r],r);if(o&&!o.hidden){var a=dom.find.child(o,"class","content");if(a)return a.innerHTML}}}var a=function(){for(var e in l){var t=l[e];if("internal"===e)return t;var r=t[s];if(void 0!==r){if("Object"!=r.constructor.name)return r;var o=r[u];if(void 0!==o)return o}}}();for(var n in r)var i=r[n],a=a.replace(n,i);return"".concat(a.slice(0,1).toUpperCase()).concat(a.slice(1))}();return(existingAlert=dom.find.child(o,"attr","data-alert-name",s))?a.push(existingAlert):c.push({field:i,message:e,violation:s}),"break"}())break}}catch(e){n.e(e)}finally{n.f()}m.removeAlerts(i,a),function(){if(0<c.length){var e,t=["valueMissing","tooShort","rangeUnderflow","rangeOverflow","tooLong","stepMismatch","typeMismatch","badInput","patternMismatch","customError"],r=t.length,o={},a=_createForOfIteratorHelper(c);try{for(a.s();!(e=a.n()).done;){var n=e.value,i=t.indexOf(n.violation);i<r&&(r=i,o=n)}}catch(e){a.e(e)}finally{a.f()}m.addAlert(o.field,o.message,"warning",o.violation)}}(),dom.has(d,"class","invalid")}()),t},arguments,{field:{}})},reportFieldIssue:function(e,t){return this.handleMethod(function(){e.setCustomValidity(t),this.reportFieldValidity(e),this.updateFormValidationState(e.form)}.bind(this),arguments,{field:{},message:{condition:function(e){return void 0!==e&&"string"==typeof e&&0<e.trim().length},message:"A valid message must be provided."}})},reportFormValidity:function(e){return this.handleMethod(function(e){var t=this.validateForm(e);if(!0!==t)for(var r in t){var o=this.getField(e,r);Array.isArray(o)?this.reportFieldValidity(o[0]):this.reportFieldValidity(o)}return t}.bind(this),arguments,{form:{}},null)},updateFormValidationState:function(o){var a=this;return this.handleMethod(function(){var e=a.validateForm(o,!1),t="invalid";function r(e){edit.class(o,e?"remove":"add",t),a.togglePrimaryFormControls(o,"submit",e,"formValidationStateSync")}return e&&dom.has(o,"class",t)?r(!0):e||dom.has(o,"class",t)||r(!1),e},arguments,{form:{}},null)},updateFormModifiedState:function(u){var m=this;return this.handleMethod(function(){var e="modified",t=tryParseInt(dom.get(u,"attr","data-modified-fields")),r=0<t,o=dom.has(u,"class",e),a=dom.find.children(u,"class","change-count");if(a){var n,i=_createForOfIteratorHelper(a);try{for(i.s();!(n=i.n()).done;){var s=n.value;s.innerHTML="".concat(t," unsaved change").concat(checkPlural(t)),o!=r&&isHidden(s,!r)}}catch(e){i.e(e)}finally{i.f()}}if(o!=r){var d=dom.get(u,"attr","data-require-modify");if(edit.class(u,r?"add":"remove",e),d)for(var l=0,f=["reset","submit"];l<f.length;l++){var c=f[l];-1!=d.indexOf(c)&&("reset"!=c&&dom.has(u,"class","invalid")||m.togglePrimaryFormControls(u,c,r,"requiresModify"))}}},arguments,{form:{}},null)},updateFormCompletionPercentage:function(s){var d=this;return this.handleMethod(function(){if(dom.find.child(s,"class","footer")){var e=dom.find.children(s,"class","progress-bar");if(e){var t,r=function(){var e,t={complete:{},total:{}},r=_createForOfIteratorHelper(d.getProps(s,!0).children.fields);try{for(r.s();!(e=r.n()).done;){var o,a,n=e.value;dom.has(n,"class","input")&&((a=(o=d.getProps(n)).states).hidden||a.readonly||a.disabled||!a.isModified&&a.canSubmit||(t.total[o.info.name]=!0,a.canSubmit&&(t.complete[o.info.name]=!0)))}}catch(e){r.e(e)}finally{r.f()}return{complete:Object.keys(t.complete).length,total:Object.keys(t.total).length}}(),o=Math.round(r.complete/r.total*100),a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var n=t.value,i=dom.find.child(n,"class","cursor");updateProgressBar(n,o),ShiftCodesTK.layers.updateTooltip(i,"<code>".concat(o,"%</code> of the form has been completed. <code>").concat(r.total-r.complete,"</code> fields remaining."),{delay:"none",align:"right"})}}catch(e){a.e(e)}finally{a.f()}return o}}return!1},arguments,{form:{}},null)},getFormData:function(o,e,t){var v=1<arguments.length&&void 0!==e?e:"formatted",g=!(2<arguments.length&&void 0!==t)||t;return this.handleMethod(function(){var u,m=this,e=this.getProps(o,!0).children.fields,h={},t=dom.find.child(o,"class","submitter"),r=_createForOfIteratorHelper(e);try{for(r.s();!(u=r.n()).done;)(function(){var e,t=u.value,r=(e=dom.get(t,"tag"),-1!=["fieldset","select","a","button"].indexOf(e)?e:dom.get(t,"attr","type"));if("a"==r||"button"==r)return;var o=m.getProps(t),a=h,n=o.info.name,i=o.info.value,s=dom.find.parents(t,"attr","data-nested");if(o.states.willSubmit||g){if(s&&"formatted"==v)for(var d="",l=s.length-1;0<=l;l--){var f=s[l],c=dom.get(f,"attr","data-nested"),d=""!=d?c=c.replace(new RegExp("(".concat(d,")(_){0,1}")),""):c;void 0===a[c]&&(a[c]={}),n=n.replace(new RegExp("(".concat(c,")(_){0,1}")),""),a=a[c]}o.states.willSubmit?n.indexOf("[]")==n.length-2?(null==a[n]&&(a[n]=[]),a[n].push(i)):a[n]=i:a[n]||(a[n]=null)}})()}catch(e){r.e(e)}finally{r.f()}return t&&(h[t.name]=t.value),h}.bind(this),arguments,{form:{},format:{condition:function(e){return-1!=["formatted","original"].indexOf(0<arguments.length&&void 0!==e?e:"formatted")},message:'"${arg}" is not a valid value option for the format.'}})},resetForm:function(i,e){var s=1<arguments.length&&void 0!==e&&e,d=this;return this.handleMethod(function(){var o=this,a=this.getProps(i,!0),n=dom.find.child(i,"class","resetter");return!(!d.formEvents.dispatchFormEvent(i,"FormBeforeReset",{form:i,formData:d.getFormData(i,"original"),formProps:a,originalEvent:s})||!dom.has(i,"class","modified"))&&(setTimeout(function(){i.reset();var e,t=_createForOfIteratorHelper(a.children.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;dispatchCustomEvent({event:{target:r,name:"change",source:"resetForm"},options:{bubbles:!0}})}}catch(e){t.e(e)}finally{t.f()}setTimeout(function(){var e=dom.get(i,"attr","data-require-modify");edit.class(i,"remove","modified submitted"),o.updateFormCompletionPercentage(i),o.updateFormValidationState(i),e&&-1!==e.indexOf("reset")&&o.togglePrimaryFormControls(i,"reset",!1,"resetForm"),dom.has(i,"attr","disabled")&&"reset"==dom.get(i,"attr","data-state-after-submit")&&o.toggleForm(i),n&&edit.class(n,"remove","resetter"),setTimeout(function(){d.formEvents.dispatchFormEvent(i,"FormAfterReset",{form:i,formData:d.getFormData(i,"original"),formProps:d.getProps(i),originalEvent:s})},50)},50)},50),!0)}.bind(this),arguments,{form:{}})},submitForm:function(u,e){var m=1<arguments.length&&void 0!==e&&e;return this.handleMethod(function(){var l=this,t=ShiftCodesTK.toasts,o=l.getProps(u,!0),e=dom.has(u,"class","show-progress"),r=dom.get(u,"attr","data-state-after-submit"),a=dom.find.child(u,"class","submitter"),n=l.getFormData(u,"original",!1),i=!1;function s(e){var t=0<arguments.length&&void 0!==e&&e;return l.formEvents.dispatchFormEvent(u,"FormAfterSubmit",{form:u,formData:n,formProps:o,formResponseData:t,originalEvent:m})}function f(){setTimeout(function(){l.toggleForm(u)},500)}var d=l.reportFormValidity(u),c=l.formEvents.dispatchFormEvent(u,"FormBeforeSubmit",{form:u,formData:l.getFormData(u,"original"),formProps:o,originalEvent:m});return c&&(edit.class(u,"add","submitted"),l.toggleForm(u),e&&lpbUpdate(20),!0===d&&o.states.willSubmit&&("ajax"==o.info.type?ShiftCodesTK.requests.request({path:o.info.action,type:o.info.method,parameters:n,callback:function(d){setTimeout(function(){var e;s(d)&&(d?(function(){for(var t,e,r=0,o=["info","warnings","errors"];r<o.length;r++){var a=o[r],n=d[a];if(void 0!==n){l.clearFormAlerts(u);var i,s=_createForOfIteratorHelper(n);try{for(s.s();!(i=s.n()).done;)e=t=void 0,t=i.value,e=function(){if(t.parameter){var e=l.getField(u,t.parameter);if(e)return Array.isArray(e)?e[0]:e}return u}(),l.addAlert(e,t.message,a.replace(new RegExp("s$"),""))}catch(e){s.e(e)}finally{s.f()}}}}(),d.payload.form.result?((e=d.payload.form.actions).toast&&t.newToast(e.toast),e.redirect&&setTimeout(function(){setTimeout(function(){window.location=decodeURIComponent(e.redirect.location)},e.redirect.delay)},250)):(f(),setTimeout(function(){var e,t=_createForOfIteratorHelper(o.children.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!l.getProps(r).states.isValid){r.focus();break}}}catch(e){t.e(e)}finally{t.f()}},50))):t.newToast({settings:{id:"form_error_toast",template:"fatalException"},content:{title:"Request Error",body:"An error occurred while retrieving the response request. Your information may or may not have been successfully submitted."}}))},500)}}):"standard"==o.info.type&&requestToken.check(function(){e&&lpbUpdate(85),u.submit(),s()}),i=!0),setTimeout(function(){e&&lpbUpdate(100),a&&edit.class(a,"remove","submitter"),d&&"enabled"!=r?"reset"==r&&l.togglePrimaryFormControls(u,"reset",!0,"formStateAfterSubmit"):(edit.class(u,"remove","submitted"),f())},d&&"enabled"!==r?10:500)),i}.bind(this),arguments,{form:{}})},mouseEvent:function(u){var f=ShiftCodesTK.forms;return f.handleMethod(function(){var c=!1;return function(){var e,t={mouseover:{type:"add",name:"hover"},mouseout:{type:"remove",name:"hover"},focusin:{type:"add",name:"focus"},focusout:{type:"remove",name:"focus"}};if(void 0!==t[u.type]){var r=dom.find.parents(u.target,"tag","fieldset");if(r){var o=(e=u.target,dom.has(e,"class","field")&&(e=e.firstElementChild),dom.find.parents(e,"class","field")),a=t[u.type];if(o){dom.find.parent(u.target,"tag","form");var n,i=_createForOfIteratorHelper(o);try{for(i.s();!(n=i.n()).done;){var s=n.value;edit.class(s,a.type,a.name)}}catch(e){i.e(e)}finally{i.f()}var d,l=_createForOfIteratorHelper(r);try{for(l.s();!(d=l.n()).done;){var f=d.value;edit.class(f,a.type,a.name)}}catch(e){l.e(e)}finally{l.f()}c=!0}}}}(),function(){if(("mousedown"==u.type||"click"==u.type)&&dom.has(u.target,"class","input")){var e=f.getProps(u.target);if(e&&"multi"==e.info.category&&(e.states.readonly||e.states.disabled))return u.preventDefault(),u.stopImmediatePropagation()}var a,t,r,o,n,i,s,d,l;"click"==u.type&&((parent=dom.find.parent(u.target,"class","field"))&&(dom.has(u.target,"tag","label",!0)||dom.has(u.target,"tag","legend",!0)||dom.has(u.target,"class","subtitle",!0)||dom.has(u.target,"class","description",!0)||dom.has(u.target,"class","title-container",!0))&&(!(a=dom.find.parent(u.target,"class","field"))||(t=function(){var e=dom.find.children(a,"class","input");if(e){var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(!dom.has(o,"tag","fieldset"))return o}}catch(e){r.e(e)}finally{r.f()}}return!1}())&&(r=f.getProps(t).info.type,-1!=["radio","toggle-button","toggle-box"].indexOf(r)?t.click():t.focus())),(button=dom.has(u.target,"attr","data-target-field",null,!0))&&(o=dom.get(button,"attr","data-target-field"),!(n=button.form)||(i=ShiftCodesTK.forms.getField(n,o))&&(Array.isArray(i)&&(i=i[0]),i.focus())),function(){if(form=dom.has(u.target,"tag","form",null,!0)){var e,t;dom.has(form,"class","focused")||(edit.class(form,"add","focused"),dom.has(form,"class","sticky-footer")&&(e=dom.find.child(form,"class","section footer"),t=edit.copy(e),edit.class(t,"add","sticky content-wrapper"),t.id+="_sticky",t.innerHTML=t.innerHTML.replace(new RegExp('(id|data-layer-target|data-layer-targets)="([\\w\\d_]+)"',"g"),'$1="$2_sticky"'),isHidden(e,!0),e.insertAdjacentElement("afterEnd",t),dispatchCustomEvent({event:{target:window,name:"scroll",source:"formFocus"}})))}else{var r,o=_createForOfIteratorHelper(document.forms);try{for(o.s();!(r=o.n()).done;){var a,n,i=r.value;if(dom.has(i,"class","focused")){edit.class(i,"remove","focused"),dom.has(i,"class","sticky-footer")&&(a=dom.find.child(i,"class","footer"),n=dom.find.child(i,"class","sticky"),a.hidden&&isHidden(a,!1),deleteElement(n));break}}}catch(e){o.e(e)}finally{o.f()}}}(),!dom.has(u.target,"class","form-details-toggle")||(s=dom.find.parent(u.target,"tag","form"))&&dom.has(s,"class","configured")&&(c=f.toggleFormDetails(s,"toggle",u.target)),dom.has(u.target,"class","toolbar",null,!0)&&(!(d=dom.find.parent(u.target,"class","input-container"))||(l=dom.find.child(d,"class","input"))&&(dom.has(u.target,"class","toggle-password-visibility",null,!0)&&f.togglePasswordFieldVisibility(l),dom.has(u.target,"class","clear-field",null,!0)&&f.updateField(l,"",{source:"clearFieldButton"}),l.focus())))}(),c},arguments)},inputEvent:function(e){var g=ShiftCodesTK.forms;return ShiftCodesTK.forms.handleMethod(function(c){var s,u=!!dom.has(c.target,"class","input")&&c.target;if(u){var d=u.form,m=this.getProps(u),e="input"==c.type&&"single"==m.info.category||"change"==c.type;if("input"==c.type&&c.isTrusted&&(m.states.readonly||m.states.disabled))return g.resetField(c.target),c.stopImmediatePropagation(),console.log(c.target.value,c.target.defaultValue),!1;if(e){if(function(){var e,t,r,o,a,n,i,s,d,l,f;"single"==m.info.category&&(!1!==(e=tryParseInt(dom.get(u,"attr","data-previous-length"),"ignore"))&&m.info.value.length,"input"==c.type&&((dom.has(u,"attr","minLength")||dom.has(u,"attr","maxLength"))&&this.updateCharCounter(u),"textarea"==m.info.type&&(t=function(e){u.rows!=e&&(u.rows=e)},o=9,(r=2)<=(n=null!==(a=m.info.value.match(new RegExp("\\r|\\n","g")))?a.length:0)&&n<=o?t(n):n<r?t(r):o<n&&t(o))),!(transformation=dom.get(u,"attr","data-text-transform"))||(i={lowercase:(m=this.getProps(u)).info.value.toLowerCase(),uppercase:m.info.value.toUpperCase(),words:ucWords(m.info.value)})[transformation]&&g.updateField(u,i[transformation],{source:"toolbarTextTransform",suppressEvents:!0}),(fillAttr=dom.get(u,"attr","data-dynamic-fill"))&&(m=this.getProps(u),(s=tryJSONParse(fillAttr))&&m.info.value.length!=e-1&&(d=(f=function(){var e,t="",r=s.match.match(new RegExp("\\([^?][^:+!][^)]+\\)(?:\\{[\\d,]+\\}|[*+?]){0,1}","g")),o=_createForOfIteratorHelper(_toConsumableArray(s.fill.matchAll(new RegExp("(\\$\\d)|([^$]+)","g"))));try{for(o.s();!(e=o.n()).done;){var a=e.value;void 0!==a[1]?t+=r[tryParseInt(a[1].substr(1),"throw")-1]:void 0!==a[2]&&(t+=escapeRegExp(a[2]))}}catch(e){o.e(e)}finally{o.f()}return t}(),m.info.value.replaceAll(new RegExp(f,"g"),function(e){for(var t="",r=arguments.length,o=new Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];for(var n=0,i=o;n<i.length;n++){var s=i[n];if(-1!==["undefined","number"].indexOf(_typeof(s)))break;t+=s}return t})).replace(new RegExp(s.match,"g"),s.fill),(!1===(l=dom.get(u,"attr","maxLength"))||d.length<=l)&&g.updateField(u,d,{source:"toolbarDynamicFill",suppressEvents:!0}))),!1!==e&&(m=this.getProps(u),edit.attr(u,"update","data-previous-length",m.info.value.length)))}.bind(this)(),"checkbox"==m.info.type&&m.info.name.indexOf("[]")==m.info.name.length-2){var t,r="required_checkboxes",o=dom.find.children(m.containers.fieldset,"attr","name",m.info.name),a=!1,n=!1,i=_createForOfIteratorHelper(o);try{for(i.s();!(t=i.n()).done;){var l=t.value;l!=u&&(l.required&&(a=!0),l.checked&&(n=!0))}}catch(e){i.e(e)}finally{i.f()}if(u.checked?!u.required&&a&&this.toggleField(u,{required:!0},r):u.checked||u.required&&a&&n&&this.toggleField(u,{required:!1},r),u.required&&!n&&(u.checked&&a||!u.checked&&!a)){var f,h=_createForOfIteratorHelper(o);try{for(h.s();!(f=h.n()).done;){var v=f.value;v!=u&&this.toggleField(v,{required:!u.checked},r)}}catch(e){h.e(e)}finally{h.f()}}}(function(){var e,t,r;-1==["resetForm"].indexOf(c.customEventSource)&&(e=this.validateField(u),t=this.validationTimeouts[m.info.name],r=!c.customEventSource||"updateField"==c.customEventSource||-1==c.customEventSource.indexOf("fieldController"),t&&(clearTimeout(t),m=g.getProps(u),delete this.validationTimeouts[m.info.name]),!0!==e&&"change"!=c.type||(this.reportFieldValidity(u),r&&this.updateFormValidationState(d)),"input"==c.type&&(this.validationTimeouts[m.info.name]=setTimeout(function(){g.formEvents.dispatchFormEvent(u,"FieldTimeout",{field:u,fieldValue:m.info.value,fieldProps:m,originalEvent:c},!!c.customEventSource&&c.customEventSource),delete this.validationTimeouts[m.info.name],this.reportFieldValidity(u),r&&this.updateFormValidationState(d)}.bind(this),2500)))}).bind(this)(),"change"==c.type&&g.checkDynamicValidations(u),c.customEventSource&&-1!=c.customEventSource.indexOf("fieldController")||(s="modified",function(){var e,t,r=m.states.isModified,o=m.states.hasValue;if(r!=dom.has(u,"class",s)&&"updateField"!=c.customEventSource){function a(e){edit.class("select"!=m.info.type?e:dom.find.parent(e,"tag","select"),r?"add":"remove",s),m.info.type}if(!(e="data-modified-fields")!==(t=tryParseInt(dom.get(d,"attr",e)))&&edit.attr(d,"update",e,r?t+1:t-1),"multi"!=m.info.category)a(u);else{var n,i=_createForOfIteratorHelper(g.getField(d,m.info.name));try{for(i.s();!(n=i.n()).done;){a(n.value)}}catch(e){i.e(e)}finally{i.f()}}}o!=dom.has(m.containers.field,"class","has-value")&&edit.class(m.containers.field,o?"add":"remove","has-value")}(),"change-controller"!=c.customEventSource&&g.updateFormModifiedState(d),"change"==c.type&&-1==["resetForm","fieldController","fieldControllerReverse"].indexOf(c.customEventSource)&&g.updateFormCompletionPercentage(d),"change"==c.type&&dom.has(d,"class","submit-on-change")&&g.validateForm(d)&&g.submitForm(d)),!c.isTrusted&&"resetForm"!=c.customEventSource||g.checkController(u),m=g.getProps(u),g.formEvents.dispatchFormEvent(u,"Field".concat("input"==c.type?"Change":"Commit"),{field:u,fieldValue:m.info.value,fieldProps:m,originalEvent:c},!!c.customEventSource&&c.customEventSource)}}return!1}.bind(g),arguments)},formEvent:function(m){ShiftCodesTK.toasts;var h=ShiftCodesTK.forms,n=ShiftCodesTK.modals;return h.handleMethod(function(){var l,e,t,r,o,f={modalFormID:"data-form",modalIDs:{reset:"form_reset_confirmation_modal",submit:"form_submit_confirmation_modal"}},c=dom.get(m.target,"attr","type");if("click"!=m.type||"reset"!=c&&"submit"!=c)return!1;var a=m.target.form,u={reset:function(){return h.resetForm(a,m)},submit:function(){return h.submitForm(a,m)}};return m.preventDefault(),edit.class(m.target,"add","".concat(c,"ter")),function(){var e,t=_createForOfIteratorHelper(h.getProps(a,!0).children.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;dom.has(r,"class","password")&&h.togglePasswordFieldVisibility(r,!1)}}catch(e){t.e(e)}finally{t.f()}}(),(o=dom.get(a,"attr","data-require-confirmation"))&&-1!=o.indexOf(c)&&("reset"==c&&dom.has(a,"class","modified")&&(!dom.has(a,"attr","disabled")||"reset"!=dom.get(a,"attr","data-state-after-submit"))||"submit"==c)?(l=dom.find.id(f.modalIDs[c]),h.togglePrimaryFormControls(a,c,!1,"requiresConfirmationPrompt"),e={shared:{mode:l?"update":"create",showModal:!1,callback:function(e){var t=dom.get(l,"attr",f.modalFormID);if(!t)throw"formEventConfirmationCallback Error: The form ID was not provided.";var r=dom.find.id(t);if(!r||!dom.has(r,"tag","form"))throw"formEventConfirmationCallback Error: The provided form ID does not match a valid form.";var o,a,n,i,s="_confirmation_response";if(h.getField(r,s))for(var d in e){"modal"!=d&&(o=e[d],a=d.replaceAll(/([a-z])([A-Z])/g,function(e,t,r){return"".concat(t,"_").concat(r.toLowerCase())}),n=h.getField(r,"".concat(s,"_").concat(a)),console.log(n,o,"".concat(s,"_").concat(a)),h.updateField(Array.isArray(n)?n[0]:n,o.toString()))}h.formEvents.dispatchFormEvent(r,"FormAfter".concat(ucWords(c),"Confirmation"),{form:r,formData:h.getFormData(r,"original"),formProps:h.getProps(r),originalEvent:m,confirmationModal:l,confirmationResult:e})&&(e.response?u[c]():h.togglePrimaryFormControls(r,c,!0,"requiresConfirmationResponse")),edit.class(l,"remove",f.modalFormID),(i=dom.find.child(r,"class","".concat(c,"ter")))&&edit.class(i,"remove","".concat(c,"ter"))}},reset:{title:"Reset Form",body:"Are you sure you want to start over?",id:f.modalIDs.reset,actions:{deny:{name:"Cancel",tooltip:"Remain where you currently are in the form"},approve:{name:"Start Over",tooltip:"Start over at the beginning of the form",color:"warning"}}},submit:{title:"Submit Form",body:"Are you sure you want to submit the form?",id:f.modalIDs.submit,actions:{deny:{name:"Cancel",tooltip:"Go back to the form"},approve:{name:"Submit Form",tooltip:"Save and submit the form"}}}},t=function(){var e=dom.find.child(a,"class","".concat(c," confirmation-properties"));if(e){var t=tryJSONParse(e.textContent);if(t)return t.body=decodeReservedHTML(t.body),t}return{}}(),r=mergeObj(e.shared,e[c],t),l=n.addConfirmationModal(r),edit.attr(l,"update",f.modalFormID,a.id),!0===h.formEvents.dispatchFormEvent(a,"FormBefore".concat(ucWords(c),"Confirmation"),{form:a,formData:h.getFormData(a,"original"),formProps:h.getProps(a),originalEvent:m,confirmationModal:l})&&n.toggleModal(l,!0)):u[c](),!0},arguments)},footerEvent:function(e){return ShiftCodesTK.forms.handleMethod(function(e){var t,r,o,a,n;"scroll"!=e.type||(t=dom.find.child(document.body,"class","sticky-footer focused"))&&(r=dom.find.child(t,"class","footer"),o=dom.find.child(t,"class","footer sticky"),a=r.getBoundingClientRect(),(n=o.getBoundingClientRect()).bottom<a.bottom&&!r.hidden?(isHidden(r,!0),isHidden(o,!1)):n.bottom>=a.bottom&&r.hidden&&(isHidden(o,!0),isHidden(r,!1)))},arguments)}},setTimeout(function(){var e=ShiftCodesTK.forms;(function(){(function(){for(var e=0,t=["mouseover","mouseout","focusin","focusout","mousedown","click"];e<t.length;e++){var r=t[e];window.addEventListener(r,this.mouseEvent)}}).bind(this)(),function(){for(var e=0,t=["input","change"];e<t.length;e++){var r=t[e];window.addEventListener(r,this.inputEvent)}}.bind(this)(),window.addEventListener("click",this.formEvent),function(){for(var e=0,t=["scroll"];e<t.length;e++){var r=t[e];window.addEventListener(r,this.footerEvent,!0)}}.bind(this)(),window.addEventListener("beforeunload",function(e){var t,r=_createForOfIteratorHelper(document.forms);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(dom.has(o,"class","modified")&&dom.has(o,"class","confirm-unsaved-changes")&&!dom.has(o,"class","submitted"))return e.returnValue=!0,e.preventDefault(),!0}}catch(e){r.e(e)}finally{r.f()}})}).bind(e)(),e.setupChildForms(document.body),e.isLoaded=!0},50))},50)}();