function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);function d(){}var i=0;return{s:d,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:d}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,n=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,d=new Array(t);a<t;a++)d[a]=e[a];return d}var shiftStats={total:0,new:0,expiring:0},shiftProps={game:"all",owner:!1,code:!1,filter:["active"],order:"default",limit:10,offset:0},shiftUpdates={interval:{id:0,set:function(){shiftUpdates.interval.id=setInterval(shiftUpdates.check,12e4)},clear:function(){clearInterval(shiftUpdates.interval.id)},restart:function(){shiftUpdates.clear(),shiftUpdates.set()}},stats:{},toggleIndicator:function(e,t){var a=1<arguments.length&&void 0!==t?t:0,d=dom.find.id("shift_update_indicator");dom.find.child(d,"class","counter").innerHTML=a,updateLabel(d,d.title.replace(new RegExp("\\d+"),a)),e?(d.addEventListener("click",shiftUpdates.fetch,{once:!0}),isHidden(d,!1),edit.class(d,"remove","hidden")):(edit.class(d,"add","hidden"),setTimeout(function(){isHidden(d,!0)},250))},check:function(){newAjaxRequest({file:"/assets/requests/get/shift/updates",params:{last_check:moment.utc(shiftUpdates.stats.last_check).format(),game_id:shiftProps.game},callback:function(e){var t,a=tryJSONParse(e);a&&200==a.statusCode&&(0<(t=a.payload.count)?shiftUpdates.toggleIndicator(!0,t):shiftUpdates.stats.last_check=moment.utc().valueOf())}})},fetch:function(){getCodes(),shiftUpdates.toggleIndicator(!1),shiftUpdates.stats.last_check=moment.utc().valueOf()}};function syncShiftComponents(){var e,t,a,d,l=dom.find.id("shift_header");function i(){var e=dom.find.id("shift_code_pager");return!(!e||!dom.has(e,"class","configured"))&&updatePagerProps(e,d)}!function(){var e,t=dom.find.child(l,"class","section badges"),a=_createForOfIteratorHelper(dom.find.children(t,"class","badge"));try{for(a.s();!(e=a.n()).done;){var d,i=e.value,o=dom.get(i,"attr","data-value"),r=ucWords(o),n=shiftStats[o],s="";0<n?(s+="".concat(n," "),"total"==o?s+="SHiFT Codes Available":(d=-1!=shiftProps.filter.indexOf(o),s+="".concat(r," SHiFT Codes ").concat(d?"(Click to clear Filter)":"(Click to Filter)"),edit.attr(i,"update","aria-pressed",d))):s="total"==o?"No SHiFT Codes Available":"No ".concat(r," SHiFT Codes"),"total"!=o&&isDisabled(i,!(0<n)),edit.class(i,0<n?"remove":"add","inactive"),dom.find.child(i,"class","count").innerHTML=n,updateLabel(i,s,["tooltip"])}}catch(e){a.e(e)}finally{a.f()}}(),function(){var e=dom.find.id("shift_header_sort_filter_form"),t={sort:shiftProps.order,status_filter:shiftProps.filter,game_filter:shiftProps.game};if(!dom.has(e,"class","updated")){for(var a in t)formUpdateField(e,a,t[a]);edit.class(e,"add","updated")}}(),e=shiftProps.limit,t=shiftProps.offset,a=shiftStats.total,d={now:t/e+1,max:0<a?Math.ceil(a/e):1},i()||tryToRun({function:i})}function redeemShiftCode(e){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],t="string"==typeof e&&12==e.length?"code_hash":!("object"!=_typeof(e)||-1==e.constructor.name.indexOf("Element")||!dom.has(e,"class","shift-code"))&&"panel";function r(e){var t=dom.find.child(e,"class","action redeem");edit.class(e,o?"add":"remove","redeemed"),t&&(edit.attr(t,"update","aria-pressed",o),t.innerHTML=t.innerHTML.replace(o?"fa-bookmark":"fa-check",o?"fa-check":"fa-bookmark"),t.innerHTML=t.innerHTML.replace(o?"Redeem":"Redeemed",o?"Redeemed":"Redeem"),updateLabel(t,t.title.replace(o?"Mark":"Un-mark",o?"Un-mark":"Mark")))}function n(e,t){var a,d=_createForOfIteratorHelper(e);try{for(d.s();!(a=d.n()).done;){var i=a.value,o=dom.find.child(i,"class","action redeem");o&&(isDisabled(o,!t),edit.class(o,t?"remove":"add","in-progress"))}}catch(e){d.e(e)}finally{d.f()}}if(!t)return console.error("redeemShiftCode Error: Provided SHiFT Code is not a valid Code Hash or SHiFT Code Dropdown Panel."),!1;if("panel"==t)r(e);else if("code_hash"==t){var s=dom.find.children(dom.find.id("shift_code_list"),"attr","data-code-hash",e);if(!s)return console.error('redeemShiftCode Error: No present SHiFT Code Dropdown Panels were found with a Code Hash of "'.concat(e,'". This indicates an invalid Code Hash or illegal redemption operation.')),!1;n(s,!1),newAjaxRequest({type:"POST",file:"/assets/requests/post/shift/redeem",params:{code:e,action:o?"add":"delete"},requestHeader:"form",callback:function(e){var i=tryJSONParse(e);function t(){return newToast({settings:{template:"exception"},content:{title:"Failed to redeem SHiFT Code",body:"We could not redeem this SHiFT Code due to an error. Please refresh the page and try again."}})}return!i||200!=i.statusCode&&201!=i.statusCode?(t(),!1):void setTimeout(function(){n(s,!0);var e,t,a,d=_createForOfIteratorHelper(s);try{for(d.s();!(e=d.n()).done;){r(e.value)}}catch(e){d.e(e)}finally{d.f()}return o&&i.payload.displayToast&&(t=1==(a=i.payload.toastType)?"This SHiFT Code has been redeemed successfully! Redeemed SHiFT Codes will be marked anytime you visit ShiftCodesTK from your current browser. If your browser cookies are deleted, your redeemed SHiFT Codes may be lost.":2==a?"This SHiFT Code has been redeemed successfully! Redeemed SHiFT Codes will be marked anytime you visit ShiftCodesTK as long as you are logged in.":void 0,newToast({settings:{id:"redeemed_code_toast",duration:"infinite"},content:{icon:"fas fa-key",title:"SHiFT Code Redeemed!",body:t}})),!0},500)}})}return!0}function updateShiftCodeTimestamp(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,a=dom.find.child(dom.find.child(dom.find.child(e,"class","code-info"),"class","last-update"),"tag","dd"),d=moment.utc(t);a.innerHTML=d.fromNow(),updateLabel(a,d.format("MMMM DD, YYYY hh:mm A [UTC]"),["tooltip"])}function retrieveCodes(){var r={};function n(e){for(var t=0,a=[r.badges.new,r.badges.expiring,r.addCodeButton,r.sortFilterButton,r.pager];t<a.length;t++){var d=a[t];d&&!dom.has(d,"class","inactive")&&isDisabled(d,!e)}}function s(e){var t={};for(var a in t.overlay=dom.find.id("shift_overlay"),t.spinner=dom.find.child(t.overlay,"class","spinner"),t.error=dom.find.child(t.overlay,"class","error"),e){var d=e[a];isHidden(t[a],!d)}}function l(l){try{var c=edit.copy(dom.find.id("shift_code_template")),n={};n.header=dom.find.child(c,"class","header"),n.body=dom.find.child(c,"class","body active"),n.deletedBody=dom.find.child(c,"class","body deleted");var e,t,f="".concat("shift_code","_").concat(l.properties.code_id);return function(){var e=["id","for","data-view","data-target","data-layer-target","data-layer-targets","aria-labelledby","aria-describedby"],t=c.querySelectorAll("[".concat(e.join("], ["),"]"));c.id=f,edit.attr(c,"add","data-code-id",l.properties.code_id),null!==l.properties.code_hash&&edit.attr(c,"add","data-code-hash",l.properties.code_hash);var a,d=_createForOfIteratorHelper(t);try{for(d.s();!(a=d.n()).done;){var i,o=a.value,r=_createForOfIteratorHelper(e);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=dom.get(o,"attr",n);!1!==s&&""!=s&&edit.attr(o,"update",n,function(e){var t=e.split(", ");for(var a in t)t[a]="".concat(f,"_").concat(t[a]);return t.join(", ")}(s))}}catch(e){r.e(e)}finally{r.f()}}}catch(e){d.e(e)}finally{d.f()}l.states.userHasRedeemed&&redeemShiftCode(c,!0)}(),"deleted"!=l.properties.code_state?(deleteElement(n.deletedBody),dom.find.child(n.header,"class","reward").innerHTML=l.info.reward,(S=l.states).codeIsActive&&"active"==l.properties.code_state?(0==l.info.reward.trim().search("\\d{1} Golden Key(s){0,1}$")?edit.class(c,"add","basic"):edit.class(c,"add","rare"),S.codeIsNew&&edit.class(c,"add","new"),S.codeIsExpiring&&edit.class(c,"add","expiring")):"hidden"==l.properties.code_state?edit.class(c,"add","hidden"):S.codeIsActive||edit.class(c,"add","expired"),"all"==shiftProps.game&&(T=dom.find.child(n.header,"class","label game-label"),C=l.properties.game_id,H=shiftNames[C],edit.class(c,"add","game-label"),edit.class(T,"add",C),T.innerHTML=T.innerHTML.replace("Borderlands",H),updateLabel(T,"SHiFT Code for ".concat(H),["tooltip"])),S.codeWasRecentlyAdded?edit.class(c,"add","recently-added"):S.codeWasRecentlyUpdated&&edit.class(c,"add","recently-updated"),S.userIsOwner&&edit.class(c,"add","owned"),L=dom.find.child(n.header,"class","progress-bar"),M=dom.find.child(L,"class","progress"),P=0,E="",E=l.info.expiration_date?(x=(w=moment.utc(l.info.expiration_date)).diff(l.info.release_date,"hours"),F=w.diff(moment.utc(),"hours"),k=w.fromNow(!0),l.states.codeIsActive?(P=100-Math.round(F/x*100),ucWords("".concat(k," Remaining"))):(P=100,ucWords("Expired ".concat(k," Ago")))):(edit.class(L,"add","inactive"),P=0,"No Expiration Date"),edit.attr(L,"add","aria-valuenow",P),updateLabel(L,E,["tooltip"]),edit.class(M,"add",l.properties.game_id),M.style.width="".concat(P,"%"),function(){var i={dates:{}};i.dates.date="MMM DD, YYYY",i.dates.expandedDate="dddd, MMMM DD, YYYY",i.dates.time="h:mm A zz",i.dates.full="".concat(i.dates.date," ").concat(i.dates.time),i.dates.expanded="".concat(i.dates.expandedDate," ").concat(i.dates.time),i.calendars={sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd"};var a={release:{}};for(var e in a.release.formats=function(){var e={simple:{},full:{},expanded:{}},t=i.dates,a=i.calendars;for(var d in a)e.simple[d]="".concat(a[d]),e.full[d]="".concat(a[d],", ").concat(t.date),e.expanded[d]="".concat(a[d],", ").concat(t.expandedDate);return e.simple.sameElse=e.full.sameElse=t.date,e.expanded.sameElse=t.expandedDate,e}(),a.release.dates=function(){var e=l.info.release_date;if(e){var t=moment(e);return{simple:t.calendar(null,a.release.formats.simple),full:t.calendar(null,a.release.formats.full),expanded:t.calendar(null,a.release.formats.expanded)}}return!1}(),a.expiration={},a.expiration.formats=function(){var e={simple:{},full:{},expanded:{}},t=i.dates,a=i.calendars;for(var d in a)e.simple[d]="".concat(a[d],", ").concat(t.time),e.full[d]="".concat(a[d],", ").concat(t.full),e.expanded[d]="".concat(a[d],", ").concat(t.expanded);return e.simple.sameElse=e.full.sameElse=t.full,e.expanded.sameElse=t.expanded,e}(),a.expiration.dates=function(){var e=l.info.expiration_date;if(e){var t=moment.tz(e,l.info.timezone);return{simple:t.calendar(null,a.expiration.formats.simple),full:t.calendar(null,a.expiration.formats.full),expanded:t.calendar(null,a.expiration.formats.expanded)}}return!1}(),a){var t=a[e].dates,d={};d.main=D(e),d.simple=dom.find.child(d.main,"class","simple"),d.full=dom.find.child(d.main,"tag","dd"),t?(t.simple!=t.full?d.simple.firstChild.innerHTML=t.simple:deleteElement(d.simple),d.full.innerHTML=t.full,updateLabel(d.full,t.expanded,["tooltip"])):(edit.class(d.main,"add","inactive"),updateLabel(d.full,"No ".concat(ucWords(e)," Date"),["tooltip"]),deleteElement(d.simple),d.full.innerHTML="N/A")}}(),p=D("src"),u=dom.find.child(p,"class","link"),h=dom.find.child(p,"class","no-link"),(v=l.info.source)?(u.href=v,u.innerHTML+=v,deleteElement(h)):(edit.class(p,"add","inactive"),deleteElement(u)),_=D("notes"),null!==(b=l.info.notes)?(y=dom.find.child(_,"tag","ul"),g=-1!=b.indexOf("-")?b.replace(new RegExp("-.*","g"),function(e){return"".concat(e.replace(new RegExp("-\\s{1}","g"),"<li>"),"</li>")}):"<li>".concat(b,"</li>"),y.innerHTML=g):deleteElement(_.parentNode),function(){for(var e=l.codes,t=0,a=["pc","xbox","ps"];t<a.length;t++){var d=a[t],i=dom.find.child(n.body,"class",d),o=Object.values(e["platforms_".concat(d)]).join(" / "),r=e["code_".concat(d)];dom.find.child(i,"class","title").innerHTML=o,dom.find.child(i,"class","display").innerHTML=r,updateLabel(dom.find.child(i,"class","display"),"".concat(o," SHiFT Code"),["tooltip"]),dom.find.child(i,"class","value").value=r}}(),m=dom.find.child(n.body,"class","footer"),(d={}).container=dom.find.child(m,"class","actions"),d.redeem=dom.find.child(d.container,"class","redeem"),d.optionsMenu=dom.find.child(d.container,"class","options-menu"),l.states.codeIsActive||isDisabled(d.redeem,!0),(s={}).container=dom.find.child(m,"class","code-info"),s.id=dom.find.child(s.container,"class","id"),s.lastUpdate=dom.find.child(s.container,"class","last-update"),s.owner=dom.find.child(s.container,"class","owner"),a("id",i=l.properties.code_id,"SHiFT Code #".concat(i)),updateShiftCodeTimestamp(c,l.info.last_update),l.states.userCanEdit?(o=l.properties.owner_username,r=l.properties.owner_id,a("owner",o,"".concat(o," #").concat(r))):deleteElement(s.owner),function(){var e,t,a,d,i=_createForOfIteratorHelper(dom.find.children(c,"class","shift-code-options-menu"));try{for(i.s();!(e=i.n()).done;)d=a=t=void 0,a=e.value,(d={}).codeID=dom.find.child(a,"class","code-id"),d.share=dom.find.child(a,"attr","data-value","share"),d.report=dom.find.child(a,"attr","data-value","report"),d.editActions=dom.find.child(a,"class","edit-actions"),d.makePublic=dom.find.child(d.editActions,"attr","data-value","make_public"),d.makePrivate=dom.find.child(d.editActions,"attr","data-value","make_private"),edit.attr(a,"add","data-code-id",l.properties.code_id),d.codeID.innerHTML=l.properties.code_id,l.states.userCanEdit?(isDisabled(d.report),t="active"==l.properties.code_state?d.makePublic:d.makePrivate,isHidden(t,!0),isDisabled(t,!0)):deleteElement(d.editActions)}catch(e){i.e(e)}finally{i.f()}}(),dropdownPanelSetup(c),multiView_setup(dom.find.child(n.body,"class","multi-view"))):(deleteElement(n.body),e=dom.find.child(n.deletedBody,"class","timestamp"),t=moment.utc(l.info.last_update),edit.class(c,"add","deleted"),dom.find.child(n.header,"class","reward").innerHTML="SHiFT Code ".concat(l.properties.code_id),e.innerHTML=t.fromNow(),updateLabel(e,t.format("MMMM DD, YYYY, hh:mm A [UTC]"),["tooltip"])),c}catch(e){return console.error("getShiftCodePanel Error: ".concat(e)),!1}function a(e,t,a){var d=2<arguments.length&&void 0!==a&&a,i=dom.find.child(s[e],"tag","dd");i.innerHTML=t,d&&updateLabel(i,d,["tooltip"])}var d,i,o,r,s,m,p,u,h,v,y,g,_,b,T,C,H,S,w,x,F,k,L,M,P,E;function D(e){return dom.find.child(dom.find.child(n.body,"class","section ".concat(e)),"class","content")}}r.header=dom.find.id("shift_header"),r.badges={},r.badges.container=dom.find.child(r.header,"class","section badges"),r.badges.active=dom.find.child(r.badges.container,"class","active"),r.badges.new=dom.find.child(r.badges.container,"class","new"),r.badges.expiring=dom.find.child(r.badges.container,"class","expiring"),r.addCodeButton=dom.find.id("shift_header_add"),r.sortFilterButton=dom.find.id("shift_header_sort_filter"),r.list=dom.find.id("shift_code_list"),r.pager=dom.find.id("shift_code_pager"),shiftUpdates.interval.clear(),n(!1),s({overlay:!0,spinner:!0,error:!1}),function(){for(var e=dom.find.children(r.list,"class","shift-code"),t=e.length-1;0<=t;t--)deleteElement(e[t])}(),lpbUpdate(50,!0,{start:15}),newAjaxRequest({file:"/assets/requests/get/shift/codes",params:shiftProps,callback:function(e){var t=tryJSONParse(e);if(t&&200==t.statusCode){lpbUpdate(75);var a=t.payload.counts,d=t.payload.shift_codes;if(a&&shiftStats!=a&&(shiftStats=a,syncShiftComponents()),0<d.length){for(var i=0;i<d.length;i++){var o=l(d[i]);o&&(o.style.animationDelay="".concat(.2*i,"s"),r.list.appendChild(o))}hashUpdate(),lpbUpdate(100),s({overlay:!1,spinner:!1,error:!1})}else lpbUpdate(100),s({overlay:!0,spinner:!1,error:!0});shiftUpdates.interval.set(),setTimeout(function(){n(!0)},500)}else lpbUpdate(100),s({overlay:!0,spinner:!1,error:!0}),ShiftCodesTK.toasts.newToast({settings:{template:"fatalException"},content:{title:"SHiFT Code Retrieval Error",body:"We could not retrieve any SHiFT Codes due to an error. Please refresh the page and try again."}})}})}function shiftCodeFormGameChangeEvent(){var e,t=dom.find.id("shift_code_form"),a=dom.find.child(t,"attr","name","general_game_id").value,d=_createForOfIteratorHelper(dom.find.children(t,"attr","data-supported-games"));try{for(d.s();!(e=d.n()).done;){var i=e.value,o=tryJSONParse(dom.get(i,"attr","data-supported-games"));for(var r in o){var n=o[r],s=dom.find.child(i,"attr","value",r),l=dom.find.parent(s,"class","field"),c=-1!=n.indexOf(a);isDisabled(s,!c),edit.class(l,c?"remove":"add","disabled"),edit.attr(s,c?"add":"remove","checked")}}}catch(e){d.e(e)}finally{d.f()}}!function(){var t=setInterval(function(){var o,r,n,e;"undefined"!=typeof globalFunctionsReady&&"undefined"!=typeof moment&&(clearInterval(t),function(){if(props=tryJSONParse(dom.get(dom.find.id("shift_code_list"),"attr","data-shift")),props)for(var e in props)void 0!==shiftProps[e]&&(shiftProps[e]=props[e])}(),function(){for(var e=dom.find.id("shift_code_template").content.children[0],t=dom.find.children(e,"class","layer"),a=0;a<t.length;a++){var d=t[a];d.id="shift_code_layer_".concat(a),ShiftCodesTK.layers.setupLayer(d)}}(),hashState=addHashListener("shift_code_",function(e){shiftProps.offset=0,shiftProps.code=e.replace("#shift_code_",""),retrieveCodes(),shiftProps.code=!1}),hashState||retrieveCodes(),e=moment.utc().valueOf(),shiftUpdates.stats={first_check:e,last_check:e},window.addEventListener("click",function(e){var t,a,d,i,o,r,n=e.target;-1!=n.id.indexOf("shift_header_count")?(t=dom.has(n,"attr","aria-pressed","true"),a=dom.get(n,"attr","data-value"),d=shiftProps.filter,t?d.splice(d.indexOf(a),1):d.push(a),shiftProps.offset=0,retrieveCodes()):dom.has(n,"class","redeem")&&(o=!!(i=dom.find.parent(n,"class","shift-code"))&&dom.get(i,"attr","data-code-hash"),r=!!i&&dom.has(i,"class","redeemed"),i&&o&&!dom.has(i,"class","expired")&&redeemShiftCode(o,!r))}),dom.find.id("shift_header_add")&&dom.find.id("shift_header_add").addEventListener("click",function(e){var t=dom.find.id("shift_code_modal"),a=dom.find.child(t,"tag","form"),d=dom.find.children(a,"class","input");a.reset();var i,o=_createForOfIteratorHelper(d);try{for(o.s();!(i=o.n()).done;){var r=i.value,n=dom.get(r,"attr","name");-1==n.indexOf("auth")&&formUpdateField(a,n,"")}}catch(e){o.e(e)}finally{o.f()}formUpdateField(a,"general_game_id","all"!=shiftProps.game?shiftProps.game:""),shiftCodeFormGameChangeEvent(),toggleModal(t,!0)}),r=dom.find.child(dom.find.id("shift_header"),"class","slideout"),(n=dom.find.id("shift_header_sort_filter")).addEventListener("click",function(e){edit.attr(n,"toggle","aria-pressed"),isHidden(r)}),o=dom.find.child(r,"tag","form"),dom.find.child(o,"class","submit").addEventListener("click",function(e){var t=ShiftCodesTK.forms.getFormData(o),a={game:t.game_filter,filter:t["status_filter[]"],order:t.sort};for(var d in event.preventDefault(),a){var i=a[d];void 0!==i&&(shiftProps[d]=i)}a.game&&edit.attr(document.body,"update","data-theme","all"!=a.game?a.game:"main"),edit.attr(n,"update","aria-pressed","false"),isHidden(r,!0),setTimeout(retrieveCodes,100)}),ShiftCodesTK.layers.addLayerListener("shift_code_options_menu",function(e,n){var t,s,l,a,d,c=dom.get(e,"attr","data-value"),i=dom.get(n,"attr","data-code-id");i&&("edit"==c?(t=dom.find.id("shift_code_".concat(i)),s=dom.find.child(t,"class","view edit"),newAjaxRequest({file:"/assets/requests/get/shift/codes",type:"GET",params:{code:i,filter:["inactive","active"],game:"all",limit:1,offset:0,order:"default",owner:!0},callback:function(e){var t=tryJSONParse(e);function a(e){newToast({settings:{template:"exception"},content:{title:"Failed to edit SHiFT Code",body:0<arguments.length&&void 0!==e?e:"This SHiFT Code could not be edited due to an error while downloading the SHiFT Code. Please try again later."}}),isDisabled(target,!1)}if(!t||200!=t.statusCode)return a(),!1;var d=t.payload.shift_codes[0];if(d)if(d.states.userCanEdit){var i=dom.find.child(s,"tag","form");!d.info.release_date||moment(d.info.release_date),!d.info.expiration_date||moment.tz(d.info.expiration_date,d.info.timezone);dom.has(i,"class","configured")||formSetup(i);var o={general_code_id:d.properties.code_id,general_reward:d.info.reward};for(var r in i.reset(),o){formUpdateField(i,r,o[r])}multiView_update(s),ShiftCodesTK.layers.toggleLayer(n,!1),setTimeout(function(){},500)}else newToast({settings:{duration:"infinite"},content:{title:"Failed to edit SHiFT Code",body:"You do not have permission to edit this SHiFT Code."}});else a()}})):"make_public"==c||"make_private"==c?(l=dom.find.id("shift_code_".concat(i)),ShiftCodesTK.layers.toggleLayer(n,!1),edit.class(l,"make_public"==c?"remove":"add","hidden"),dom.find.child(dom.find.child(l,"class","last-update"),"tag","dd").innerHTML=moment().fromNow(),function(){var e,t=_createForOfIteratorHelper(dom.find.children(l,"class","shift-code-options-menu"));try{for(t.s();!(e=t.n()).done;){var a,d=e.value,i=_createForOfIteratorHelper(dom.find.children(d,"class","visibility-toggle"));try{for(i.s();!(a=i.n()).done;){var o=a.value,r=dom.get(o,"attr","data-value")==c;isHidden(o,r),isDisabled(o,r)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){t.e(e)}finally{t.f()}}()):"delete"==c&&(a=dom.find.id("shift_code_deletion_confirmation_modal"),(d=dom.find.child(a,"tag","form")).reset(),formUpdateField(d,"code_id",i),toggleDropdownMenu(n,!1),toggleModal(a,!0)))}),tryToRun({function:function(){var e=dom.find.id("shift_code_pager");return!(!e||!dom.has(e,"class","configured"))&&(addPagerListener(dom.find.id("shift_code_pager"),function(e){return shiftProps.offset=e,retrieveCodes(),!0}),!0)}}))},250)}();