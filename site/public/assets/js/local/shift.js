function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);function a(){}var n=0;return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var shiftProps={};function updateShiftPager(){for(var o=shiftProps.gameID,e=document.getElementById("shift_code_pager"),i=shiftProps.limit,t=(getClasses(document.getElementById("shift_code_feed"),"shift-code").length,{now:shiftProps.offset/i+1,max:function(){var e=0,t=shiftProps.filter;if(0==t.length)e=shiftStats.total[o];else{var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var n=r.value;e+=shiftStats[n][o]}}catch(e){a.e(e)}finally{a.f()}}return Math.ceil(e/i)}(),offset:i,onclick:"shift_header_sort"}),r=Object.keys(t),a=0;a<r.length;a++){var n=r[a];e.setAttribute("data-".concat(n),t[n])}delClass(e,"configured"),e=configurePager(e),addPagerListeners(e,function(e){var t=tryParseInt(this.getAttribute("data-value"));t!=shiftProps.offset&&(shiftProps.offset=t,getCodes())})}function getCodes(){var l={fetched:0,added:0},e=document.getElementById("shift_header"),n={total:getClass(e,"badge total"),new:getClass(e,"badge new"),exp:getClass(e,"badge exp")},d=document.getElementById("shift_code_feed");function c(e){var t={};t.overlay=document.getElementById("shift_overlay"),t.spinner=getClass(t.overlay,"spinner"),t.error=getClass(t.overlay,"error");for(var r=Object.keys(e),a=0;a<r.length;a++){var n=r[a];vishidden(t[n],e[n])}}function f(e){for(var t=[n.new,n.exp,document.getElementById("shift_header_sort")],r=0;r<t.length;r++){var a=t[r];hasClass(a,"inactive")||disenable(a,e)}}function h(){for(var e=getClasses(d,"shift-code"),t=e.length-1;0<=t;t--)d.removeChild(e[t])}function o(u){var e,t,r,a,n,o,s,p=getTemplate("shift_code_template"),g={};function v(e,t){var r=1<arguments.length&&void 0!==t?t:g.body;return getClass(getClass(r,e),"content")}g.header=getClass(p,"header"),g.labels=getClass(g.header,"labels"),g.body=getClass(p,"body"),p.id="shift_code_".concat(u.id),p.style.animationDelay="".concat(.2*l.added,"s"),e=u.reward,t=getClass(g.labels,"basic"),0!=(getClass(g.header,"reward").innerHTML=e).search("\\d+ Golden Key")&&(t.childNodes[0].innerHTML="Rare SHiFT Code",updateLabel(t,"Rare SHiFT Code with an uncommon reward")),function(){var l="monthN date, year";function n(e){return datetime(l,0<arguments.length&&void 0!==e&&e)}n();var o=["rel","exp"],d={rel:"new",exp:"exp"},c={today:n()};!function(){var e,t,r,a=_createForOfIteratorHelper(o);try{for(a.s();!(e=a.n()).done;)r=t=void 0,r=e.value,c[r]={},c[r].origin=u["".concat(r,"_date")],c[r].form=n(c[r].origin),c[r].str=(t=c[r].origin)?-1!=t.search("00:00:00")?c[r].form:datetime("".concat(l," @ hour12:minute ampm"),t):"N/A"}catch(e){a.e(e)}finally{a.f()}}();for(var e,t,r,a,i,f=0,h=o;f<h.length;f++)!function(){var e,t,r,a,n=h[f],o=c[n],i=v(n);function s(e,t){var r=1<arguments.length&&void 0!==t?t:o.str;i.innerHTML+=r,updateLabel(i,e)}o.origin&&c.today==o.form?addClass(p,d[n]):g.labels.removeChild(getClass(g.labels,d[n])),o.origin?(e=function(e){return e.replace(datetime("monthN",o.form),datetime("monthL",o.form))},(t=dateRel(o.origin))?(r=copyElm(i),a="".concat(t,", ").concat(o.str),addClass(r,"day"),r.innerHTML="<span>".concat(o.str.replace(datetime(l,o.origin),t),"</span>"),i.appendChild(r),s(e(a),a)):s(e(o.str))):(addClass(i,"inactive"),s("No Expiration Date"))}();function s(e,t){updateProgressBar(a,e,{useWidth:!0}),updateLabel(a,t)}a=getClass(g.header,"progress-bar"),(i=c.exp.origin)?s((t=c.rel.origin,r=c.exp.origin,c.rel.form!=c.exp.form?Math.round(dateDif(t)/dateDif(t,r)*100):100),(e=dateDif(i),"".concat(e," Day").concat(checkPlural(e)," left"))):(s(0,"No Expiration Date"),addClass(a,"inactive"))}(),r=u.source,a=v("src"),n=getClass(a,"link"),o=getClass(a,"no-link"),null!==r?(n.href=r,n.innerHTML+=r,a.removeChild(o)):(addClass(a,"inactive"),a.removeChild(n)),null!==(s=u.notes)?getTag(v("notes"),"ul").innerHTML=function(){if(-1==s.indexOf("-"))return"<li><i>".concat(s,"</i></li>");var e=new RegExp("-.*","g");return s.replace(e,function(e){var t=new RegExp("-\\s{1}","g");return"".concat(e.replace(t,"<li><i>"),"</i></li>")})}():g.body.removeChild(getClass(g.body,"notes")),function(){for(var e=["pc","xbox","ps"],t=0;t<e.length;t++){var r=e[t],a=getClass(g.body,r),n=u["code_".concat(r)];getClass(a,"title").innerHTML=u["platforms_".concat(r)],getClass(a,"display").innerHTML=n,getClass(a,"value").value=n}}(),dropdownPanelSetup(p),function(){var e=getClasses(g.body,"copy");for(i=0;i<e.length;i++)e[i].addEventListener("click",copyToClipboard)}(),l.added++,1==l.added&&(h(),c({overlay:!0,spinner:!0,error:!0})),l.added==l.fetched&&(hashUpdate(),setTimeout(function(){f(!1)},600)),d.insertBefore(p,document.getElementById("shift_code_pager"))}f(!0),lpbUpdate(90,!0,{start:20}),newAjaxRequest({file:"/assets/php/scripts/shift/getCodes\n           ?gameID=".concat(shiftProps.gameID,"\n           &order=").concat(shiftProps.order,"\n           &filter=").concat(shiftProps.filter.join(", "),"\n           &limit=").concat(shiftProps.limit,"\n           &offset=").concat(shiftProps.offset,"\n           &hash=").concat(shiftProps.hash),callback:function(e){var t=tryJSONParse(e);if(t&&0==t.statusCode){var r=t.payload;if(l.fetched=t.payload.length,0<l.fetched)for(var a=0;a<l.fetched;a++)o(r[a]);else h(),c({overlay:!1,spinner:!0,error:!1})}else h(),c({overlay:!1,spinner:!0,error:!1}),newToast({settings:{template:"exception"},content:{title:"An error has occurred",body:"We could not retrieve any SHiFT Codes due to an error. Please refresh the page and try again."}});lpbUpdate(100)}})}shiftScriptsInit=setInterval(function(){var d,e;globalFunctionsReady&&(clearInterval(shiftScriptsInit),d=document.getElementById("shift_header"),shiftProps={gameID:window.location.pathname.slice(1),order:"default",filter:[],limit:10,offset:0,hash:!1},addHashListener("shift_code_",function(e){shiftProps.offset=0,shiftProps.hash=e.replace("#shift_code_",""),getCodes(),shiftProps.hash=!1})||getCodes(),tryToRun({attempts:!1,delay:500,function:function(){if(shiftStats){var l=shiftProps.gameID;return function(){new RegExp("\\d{1,2}");for(var e,t,r,a,n,o={total:getClass(d,"badge total"),new:getClass(d,"badge new"),expiring:getClass(d,"badge exp")},i=Object.keys(o),s=0;s<i.length;s++)n=a=r=t=e=void 0,t=i[s],r=o[t],a=shiftStats[t][l],e=(e=r.title).replace("No",a),1==a&&(e=e.replace("Codes","Code")),"total"!=t&&(e+=" (Click to Filter)"),n=e,0<a&&(getClass(r,"count").innerHTML=a,updateLabel(r,n),"total"!=t&&r.addEventListener("click",function(e){var t,r="true"==this.getAttribute("aria-pressed"),a=this.getAttribute("data-value");r?(t=shiftProps.filter,updateLabel(this,this.title.replace("clear Filter","Filter")),t.splice(t.indexOf(a),1)):(updateLabel(this,this.title.replace("Filter","clear Filter")),shiftProps.filter.push(a)),shiftProps.offset=0,getCodes(),updateShiftPager()}),disenable(r,!1),delClass(r,"inactive"))}(),updateShiftPager(),!0}return!1}}),e=document.getElementById("shift_header_sort_dropdown"),addDropdownMenuListeners(e,function(e){var t=this.getAttribute("aria-pressed");t&&"false"!=t||(shiftProps.order=this.getAttribute("data-value"),getCodes())}))},250);