function formInputMouseEvent(e){var t,a,i,o=e.target,l=dom.find.parents(o,"tag","fieldset");l&&(t=function(t,a){function e(e){"add"==t?edit.class(e,"add",a):"delete"==t&&edit.class(e,"remove",a)}i&&e(i);var o=!0,n=!1,r=void 0;try{for(var d,c=l[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){e(d.value)}}catch(e){n=!0,r=e}finally{try{o||null==c.return||c.return()}finally{if(n)throw r}}},a=e.type,i=dom.find.parent(o,"class","field"),"mouseover"==a?t("add","hover"):"mouseout"==a&&t("delete","hover"),"focusin"==a?t("add","focus"):"focusout"==a&&t("delete","focus"))}function formUpdateCharCounter(e){var t={max:tryParseInt(e.maxLength),now:e.value.length};t.left=t.max-t.now;var a=document.getElementById(e.id.replace("_input","_char_counter"));a.innerHTML=t.left,updateLabel(a,"".concat(t.left,"/").concat(t.max," characters remaining"))}function formSetup(v){var e;e=""!=v.id?v.id:"form_".concat(randomNum(100,1e3)),v.id=e;!function(){var e,t,a=dom.find.children(v,"group","inputs"),o={toolbox:(t=document.createElement("div"),edit.class(t,"add","toolbox"),isHidden(t,!0),t),counter:(e=document.createElement("span"),edit.class(e,"add","char-counter"),e)},n=!0,r=!1,d=void 0;try{for(var c,i=a[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var l,s,u,f=c.value,m=f.tagName.toLowerCase(),p=dom.find.parent(f,"class","input-container");"textarea"==m&&(l=edit.copy(o.toolbox),p.appendChild(l)),f.maxLength&&-1!=f.maxLength&&(s=edit.copy(o.counter),edit.class(p,"add","has-char-counter"),s.id=f.id.replace("_input","_char_counter"),"textarea"==m?((u=dom.find.child(p,"class","toolbox")).appendChild(s),isHidden(u,!1)):p.appendChild(s),formUpdateCharCounter(f))}}catch(e){r=!0,d=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw d}}}(),edit.class(v,"add","configured")}function formHandleSubmit(e){$useAjax=e.preventDefault()}!function(){var e=setInterval(function(){globalFunctionsReady&&(clearInterval(e),function(){var e=document.forms,t=!0,a=!1,o=void 0;try{for(var n,r=e[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var d=n.value;dom.has(d,"class","no-auto-config")||dom.has(d,"class","configured")||formSetup(d)}}catch(e){a=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw o}}}(),window.addEventListener("submit",function(e){var p=e.target,v=dom.find.children(p,"class","input"),h=[],t=dom.has(p,"class","ajax-submit"),a=dom.has(p,"class","use-ajax-progress-bar");if(t){event.preventDefault(),a&&lpbUpdate(20);for(var o=0;o<v.length;o++)(function(e){var t=v[e];if(t.disabled)return;var a,o="fieldset"==(a=dom.get(t,"tag"))?"fieldset":"select"==a?"select":dom.get(t,"attr","type"),n=dom.get(t,"attr","name");if("fieldset"==o&&0<t.innerHTML.trim().length)h.push("".concat(n,"=").concat(t.innerHTML));else if("select"==o)for(var r=dom.find.children(t,"tag","option"),d=0;d<r.length;d++){var c=r[d];if(c.selected){h.push("".concat(n,"=").concat(c.value));break}}else if("radio"==o)for(var i=dom.find.children(p,"class","radio"),l=0;l<i.length;l++){var s=i[l];dom.get(s,"attr","name")==n&&s.checked&&h.push("".concat(n,"=").concat(s.value))}else if("checkbox"==o)for(var u=dom.find.children(p,"class","checkbox"),f=0;f<u.length;f++){var m=u[f];dom.get(m,"attr","name")==n&&m.checked&&h.push("".concat(n,"=").concat(m.value))}else 0<t.value.trim().length&&h.push("".concat(n,"=").concat(t.value))})(o);newAjaxRequest({type:dom.get(p,"attr","method"),file:dom.get(p,"attr","action"),requestHeader:"form",params:h.join("&"),callback:function(e){response=tryJSONParse(e),response&&0==response.statusCode&&(response.payload.toast&&newToast(response.payload.toast),response.payload.redirect&&setTimeout(function(){setTimeout(function(){window.location=decodeURIComponent(response.payload.redirect.location.replace("^reload$",""))},response.payload.redirect.delay)},250)),a&&lpbUpdate(100)}}),a&&lpbUpdate(90,!0)}}),function(){for(var e=0,t=["mouseover","mouseout","focusin","focusout"];e<t.length;e++){var a=t[e];window.addEventListener(a,formInputMouseEvent)}}())},250)}();