function imgViewClick(e){var i=e.target;if("IMG"==i.tagName&&hasClass(i,"fullscreen")){var n=document.getElementById("image_viewer"),l={};!function(){for(var e=0,i=["header","title","close"];e<i.length;e++){var t=i[e];l[t]=getClass(n,t)}}();var t=i.getAttribute("data-fullscreen"),a=copyElm(i);delClass(a,"fullscreen"),addClass(a,"img"),n.insertBefore(a,l.header),t&&(l.title.innerHTML=t),vishidden(n,!1),setTimeout(function(){delClass(n,"inactive"),l.close.focus(),focusLock.set([l.header,a],imgViewClose)},50)}}function imgViewClose(){var n=document.getElementById("image_viewer"),l={};!function(){for(var e=0,i=["img","title"];e<i.length;e++){var t=i[e];l[t]=getClass(n,t)}}(),addClass(n,"inactive"),focusLock.clear(),setTimeout(function(){vishidden(n,!0),n.removeChild(l.img),l.title.innerHTML=""},450)}!function(){var e=setInterval(function(){globalFunctionsReady&&(clearInterval(e),window.addEventListener("click",imgViewClick),getClass(document.getElementById("image_viewer"),"close").addEventListener("click",imgViewClose))},250)}();