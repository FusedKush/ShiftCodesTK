var changelogProps={limit:10,offset:0,hash:!1,firstRun:!0},changelogIdPrefix="changelog_";function getChangelogs(){var v=changelogIdPrefix,P={fetched:0,added:0},e=function(){for(var e="",t=Object.keys(changelogProps),a=0;a<t.length;a++){var n=t[a],o=changelogProps[n];e+="&".concat(n,"=").concat(o)}return e.replace("&","?")}(),b=getElement("updates_header_jump"),C=document.getElementById("changelog_list");function w(e){var t=getElement("changelog_overlay");e?(addClass(t,"inactive"),setTimeout(function(){isHidden(t,!0)},250)):(isHidden(t,!1),setTimeout(function(){delClass(t,"inactive")},50))}function _(){C.innerHTML=""}lpbUpdate(90,!0,{start:20}),isDisabled(b,!0),newAjaxRequest({file:"assets/php/scripts/getChangelogs".concat(e),callback:function(e){var t,s,a,n,o,r,l,d,i=tryJSONParse(e);if(i&&0==i.statusCode){var c=i.payload.changelogs;P.fetched=c.length;var g=!0,h=!1,p=void 0;try{for(var u,f=c[Symbol.iterator]();!(g=(u=f.next()).done);g=!0){var y=u.value;s=y,l=r=o=n=a=void 0,r=getTemplate("changelog_template"),l={icon:getClass(r,"icon").childNodes[0],version:getClass(r,"version"),date:getClass(r,"date"),type:getClass(r,"type"),body:getClass(r,"body")},d=s.version,r.id=v+d,r.style.animationDelay="".concat(.2*P.added,"s"),a=s.type.toLowerCase(),n="patch"==a?s.type:"".concat(s.type," Update"),addClass(l.icon,{major:"fa-broadcast-tower",minor:"fa-cogs",patch:"fa-tools"}[a]),updateLabel(l.icon,n),l.version.innerHTML="Version ".concat(d),l.date.innerHTML=datetime("month-date-year",s.date),l.type.innerHTML=n,o=function(){for(var e={"(#{3}\\s{1})(?=\\w)":"</ul><h3>","\\s{1}#{3}":'</h3><ul class="styled">',"-.+":function(e){return e.replace(/-\s{1}/g,"<li>")+"</li>"},"\\*{2}(?=[\\w.])":"<strong>","\\*{2}(?![\\w.])":"</strong>","_{1}(?=[\\w.])":"<em>","_{1}(?![\\w.])":"</em>","`{1}(?=[\\w.])":"<code>","`{1}(?![\\w.])":"</code>"},t=Object.keys(e),a=s.notes,n=0;n<t.length;n++){var o=t[n],r=new RegExp(o,"g"),l=e[o];a=a.replace(r,l)}return a=a.replace(/<\/ul>/,""),a+="</ul>"}(),l.body.innerHTML=o,dropdownPanelSetup(r),0==P.added&&_(),C.appendChild(r),P.added++,1==P.added&&w(!0),P.added==P.fetched&&(addFocusScrollListeners(C),hashUpdate(),changelogProps.firstRun||isDisabled(b,!1))}}catch(e){h=!0,p=e}finally{try{g||null==f.return||f.return()}finally{if(h)throw p}}if(changelogProps.firstRun){var m=i.payload.versions;changelogProps.firstRun=!1,(t=getElement("changelog_pager")).setAttribute("data-max",Math.ceil(m.length/changelogProps.limit)),t=configurePager(t),addPagerListeners(t,function(e){var t=tryParseInt(this.getAttribute("data-value"));t!=changelogProps.offset&&(changelogProps.offset=t,getChangelogs())}),function(){var e,t,a=document.getElementById("changelog_jump_template");tryToRun({function:function(){return e=document.getElementById("updates_header_jump"),t=document.getElementById("updates_header_jump_dropdown"),!0}});var n=!0,o=!1,r=void 0;try{for(var l,s=m[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var d=l.value,i=getTemplate(a),c=getTag(i,"a");c.href+=v+d,updateLabel(c,c.href.replace("[\\d\\.]+",d)),c.childNodes[0].innerHTML="Version ".concat(d),getClass(t,"choice-list").appendChild(i)}}catch(e){o=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}setupDropdownMenu(t),isDisabled(e,!1),deleteElm(a)}()}}else _(),w(!1),newToast({settings:{template:"exception"},content:{body:"We could not retrieve the changelogs from the server at this time. Please try again later."}});lpbUpdate(100)}})}!function(){var e=setInterval(function(){globalFunctionsReady&&pagers&&(clearInterval(e),addHashListener(changelogIdPrefix,function(e){changelogProps.offset=0,changelogProps.hash=e.replace("#".concat(changelogIdPrefix),""),getChangelogs(),changelogProps.hash=!1})||getChangelogs())},250)}();