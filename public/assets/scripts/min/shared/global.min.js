function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var globalScrollTimer,hashTargetTimeout,lastFocus,loadEventFired=!1,globalScriptLoaded=!0,globalScrollUpdates=0,focusLock={set:function(e,t){focusLock.active={},focusLock.active.elements=e,focusLock.active.callback=t},clear:function(){focusLock.active=!1},handle:function(e){var t=e.type,a=e.target;if(focusLock.active){var s=focusLock.active.elements,o=function(){var e=[];if(e.push(document.getElementById("alert_popup_feed")),s.constructor===Array){var t=!0,a=!1,o=void 0;try{for(var r,n=s[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value;e.push(i)}}catch(e){a=!0,o=e}finally{try{t||null==n.return||n.return()}finally{if(a)throw o}}}else e.push(s);return e}();if("click"==t){do{var r=!0,n=!1,i=void 0;try{for(var l,c=o[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){if(a==l.value)return}}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}a=a.parentNode}while(a);focusLock.active.callback()}else if("keydown"==t){var d=function(){var e=[];if(s.constructor===Array){var t=!0,a=!1,o=void 0;try{for(var r,n=s[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value;e=e.concat(getElements(i,"focusables"))}}catch(e){a=!0,o=e}finally{try{t||null==n.return||n.return()}finally{if(a)throw o}}}else e=e.concat(getElements(s,"focusables"));return e}(),u=d[0],f=d[d.length-1];!0===e.shiftKey&&"Tab"==e.key&&a==u||!1===e.shiftKey&&"Tab"==e.key&&a==f?(e.preventDefault(),a==u?f.focus():a==f&&u.focus()):"Escape"==e.key&&(e.preventDefault(),focusLock.active.callback())}}},active:!1},shiftStats=!1,hashListeners={},shiftNames={bl1:"Borderlands: GOTY",bl2:"Borderlands 2",bl3:"Borderlands 3",tps:"Borderlands: The Pre-Sequel"},shiftUpdates={creation_time:"",update_time:"",interval:{id:0,frequency:12e4,set:function(){shiftUpdates.interval.id=setInterval(shiftUpdates.interval.check,shiftUpdates.interval.frequency)},clear:function(){clearInterval(shiftUpdates.interval.id)},check:function(n){var i="/assets/php/scripts/shift/checkForUpdates";newAjaxRequest({file:"".concat(i,"?getDetails=false"),callback:function(e){var c=tryJSONParse(e);if(c){c=c.payload;function t(){var s=o[a],l="".concat(s,"_time"),e=c[l].timestamp;if(shiftUpdates[l]<e&&!n)return shiftUpdates.interval.clear(),newAjaxRequest({file:"".concat(i,"?getDetails=true"),callback:function(e){var t,a=(c=tryJSONParse(e).payload)[l].id,o=c[l].game_id,r=shiftNames[o],n="/".concat(o)==window.location.pathname,i="#shift_code_".concat(a);"creation"!=s&&!n||newToast({settings:{id:"shift_update_notice",duration:"infinite"},content:{icon:"fas fa-key",title:"creation"==s?"New SHiFT Code for ".concat(r,"!"):"SHiFT Code Update for ".concat(r,"!"),body:(t="","creation"==s?(t+="A new SHiFT Code has just been added to ShiftCodesTK! ",t+=n?"Refresh the list to access the new code.":"Do you want to go there now?"):t+="A SHiFT Code has just been updated. Refresh the list for changes to take effect.",t)},action:{use:!0,type:"link",close:n,action:n&&function(){window.location.hash==i&&(window.location.hash="#0"),shiftUpdates.interval.set()},link:n?i:"/".concat(o).concat(i),name:n?"Refresh":"View code",label:n?"Refresh the list of SHiFT Codes.":"Visit the ".concat(r," SHiFT Code page")}})}}),{v:void 0};shiftUpdates[l]=e}for(var a=0,o=["creation","update"];a<o.length;a++){var r=t();if("object"===_typeof(r))return r.v}}else shiftUpdates.interval.clear()}})}}};function parseWebpImages(e){var t=document.body.getAttribute("data-webp-support");if(null!==t){var a="true"==t,o=e.getElementsByTagName("*");for(i=0;i<o.length;i++){var r=o[i].getAttribute("data-webp"),n=void 0;null!==r&&((n=JSON.parse(r)).fullPath=n.path,!0==a?n.fullPath+=".webp":!1==a&&(n.fullPath+=n.alt),"bg"==n.type?o[i].style.backgroundImage="url("+n.fullPath+")":"img"==n.type&&(o[i].src=n.fullPath),o[i].removeAttribute("data-webp"))}}else setTimeout(function(){parseWebpImages(e)},250)}function webpSupportUpdate(e){document.body.setAttribute("data-webp-support",e),parseWebpImages(document),document.getElementsByClassName("webp-support")[0].remove()}function addFocusScrollListeners(e){var t=e.getElementsByTagName("*");for(i=0;i<t.length;i++){var a=t[i];"BUTTON"!=a.tagName&&"A"!=a.tagName&&"INPUT"!=a.tagName&&"SELECT"!=a.tagName&&"TEXTAREA"!=a.tagName||!1===a.classList.contains("no-focus-scroll")&&a.addEventListener("focusin",function(e){updateScroll(this)})}}function updateScroll(o){if(!1===hasClass(o,"clipboard-copy")&&!1===hasClass(o,"hidden")){var e=[document.documentElement,document.body],t=null!=(u=o.getAttribute("data-scrollPaddingTop"))?u:0,a=null!=(d=o.getAttribute("data-scrollPaddingBottom"))?d:0,r=64+t,n=e[1].getBoundingClientRect().height-a,i=16,s={};s.base=function(){var e,t=o.tagName.toLowerCase();if("input"!=t&&"select"!=t&&"textarea"!=t)e=o;else for(var a=o;;){if(!0===a.classList.contains("input-container")){e=a;break}a=a.parentNode}return e.getBoundingClientRect()}(),s.top=s.base.top-i,s.bottom=s.base.bottom+i;var l=s.top<r,c=s.bottom>n;if(!0===l)for(x=0;x<e.length;x++)e[x].scrollTop-=r-s.top;else if(!0===c)for(x=0;x<e.length;x++)e[x].scrollTop+=s.bottom-n;!0!==l&&!0!==c||(globalScrollUpdates=0)}var d,u}function toggleBodyScroll(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"toggle",t=document.body,a="scroll-disabled",o="data-last-scroll",r=hasClass(t,a);if(t.scrollHeight>window.innerHeight){if("toggle"==e&&(e=r),e)delClass(t,a),t.style.removeProperty("top"),setTimeout(function(){window.scrollTo(0,tryParseInt(t.getAttribute(o))),t.removeAttribute(o)},50);else{var n=window.pageYOffset;t.setAttribute(o,n),setTimeout(function(){t.style.top="-".concat(n,"px"),addClass(t,a)},50)}return!0}return!1}function hashUpdate(){var t=window.location.hash,e=""!=t;if(function(){var e=document.getElementsByTagName("*");for(i=0;i<e.length;i++)null!==e[i].getAttribute("data-hashtarget-highlighted")&&"#"+e[i].id!=t&&(e[i].removeAttribute("data-hashtarget-highlighted"),e[i].removeEventListener("mouseover",globalListenerHashTargetHover),e[i].removeEventListener("mouseout",globalListenerHashTargetAway)),null!==e[i].getAttribute("data-hashtarget")&&"#"+e[i].id!=t&&(e[i].removeAttribute("data-hashtarget"),e[i].removeEventListener("mouseover",globalListenerHashTargetHover),e[i].removeEventListener("mouseout",globalListenerHashTargetAway))}(),history.replaceState?history.replaceState(null,null,t):window.location.hash=t,!0==e){var a=document.getElementById(t.replace("#",""));!0==(null!==a)&&("true"!=a.getAttribute("data-hashtarget")&&(a.setAttribute("data-hashtarget","visible"),a.addEventListener("mouseover",globalListenerHashTargetHover),a.addEventListener("mouseout",globalListenerHashTargetAway),a.addEventListener("focusin",globalListenerHashTargetHover),a.addEventListener("focusout",globalListenerHashTargetAway)),updateScroll(a))}}function checkHash(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=window.location.hash;function a(e){if(0==t.search("#".concat(e)))return hashListeners[e](t),!0}if(e){if(a(e))return!0}else for(var o=Object.keys(hashListeners),r=0;r<o.length;r++)if(a(o[r]))return!0;return!1}function addHashListener(e,t){return hashListeners[e]=t,checkHash(e)}function copyToClipboard(e){var o=e.currentTarget;(function(){for(var e=parseInt(o.getAttribute("data-copy-target")),t=o,a=0;a<e;a++)t=t.parentNode;return getClass(t,"clipboard-copy")})().select(),document.execCommand("copy"),o.classList.remove("animated"),setTimeout(function(){o.classList.add("animated"),newToast({settings:{duration:"short",id:"clipboard-copy"},content:{icon:"fas fa-clipboard",title:"Copied to Clipboard",body:"This may not work in all browsers"},close:{use:!1}})},25)}function fixClickableContent(e){for(var t=e.childNodes,a=0;a<t.length;a++){var o=t[a];if("#text"==o.nodeName){var r=document.createElement("span");r.innerHTML=o.textContent,e.replaceChild(r,o)}}}function btnPressToggle(e){e.addEventListener("click",function(e){var t,a=e.currentTarget,o=!!(t=a.getAttribute("aria-pressed"))&&"true"==t;setTimeout(function(){a.setAttribute("aria-pressed",!o)},500)})}function globalListenerLoadClearScroll(){globalScrollUpdates=0,window.removeEventListener("load",globalListenerLoadClearScroll)}function globalListenerHashTargetHover(e){var t=this;hashTargetTimeout=setTimeout(function(){t.setAttribute("data-hashtarget","seen"),t.removeEventListener("mouseover",globalListenerHashTargetHover),t.removeEventListener("mouseout",globalListenerHashTargetAway),t.removeEventListener("focusin",globalListenerHashTargetHover),t.removeEventListener("focusout",globalListenerHashTargetAway)},750)}function globalListenerHashTargetAway(){clearTimeout(hashTargetTimeout)}function execGlobalScripts(){var e;"boolean"==typeof globalFunctionsReady?((e=document.createElement("img")).classList.add("webp-support"),e.onload=function(){webpSupportUpdate(!0)},e.onerror=function(){webpSupportUpdate(!1)},e.src="/assets/img/webp_support.webp",document.body.appendChild(e),hashUpdate(),function(){var e;if(document.getElementById("primary_header")){function u(e){var t=getTemplate(o[e.type]);"separator"!=e.type&&("crumb"==e.type&&(t.href=e.link,updateLabel(t,e.title)),e.icon?addClass(t,e.icon):t.innerHTML=e.title),a.appendChild(t)}var f={bl1:"Borderlands: GOTY",bl2:"Borderlands 2",tps:"Borderlands: The Pre-Sequel",bl3:"Borderlands 3","about-us":"About us",credits:"Credits",updates:"Updates",help:"Help Center","clearing-your-system-cache":"Clearing your System Cache",faq:"FAQ","how-to-redeem":"How to Redeem","borderlands-website":"Borderlands Website","shift-website":"SHiFT Website"},h=("/"==(e=window.location.pathname)[e.length-1]&&(e=e.slice(0,-1)),e),p=h.slice(1),a=document.getElementById("breadcrumb_container"),o={separator:"breadcrumb_separator_template",crumb:"breadcrumb_crumb_template",here:"breadcrumb_crumb_here_template"},t=Object.keys(o);u({type:"crumb",title:"Home",icon:"fas fa-home",link:"/"}),u({type:"separator"}),function(){var e=new RegExp("(\\/)|([\\w-]+)","g"),t=!0,a=!1,o=void 0;try{for(var r,n=regexMatchAll(e,p)[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value[0];if("/"==i)u({type:"separator"});else{var s="/".concat(i),l=new RegExp("\\/","g"),c=new RegExp("".concat(s,"(.*)")),d={title:f[i.replace(l,"")],link:h.replace(c,s)};d.link!=h?d.type="crumb":d.type="here",u(d)}}}catch(e){a=!0,o=e}finally{try{t||null==n.return||n.return()}finally{if(a)throw o}}}(),addClass(a.parentNode,"ready");for(var r=0,n=t;r<n.length;r++){var i=n[r];document.getElementById(o[i]).remove()}}}(),newAjaxRequest({file:"/assets/php/scripts/shift/getStats.php",callback:function(e){var t=tryJSONParse(e);t?shiftStats=t.payload:newToast({settings:{template:"exception"},content:{body:"We could not retrieve SHiFT Code statistics due to an error. This may affect the site until refreshed."}})}}),function(){for(var e=getElements(document,"clickables"),t=0;t<e.length;t++)fixClickableContent(e[t])}(),function(){for(var e=getTags(document,"button"),t=0;t<e.length;t++){var a=e[t];hasClass(a,"o-pressed")&&btnPressToggle(a)}}(),window.addEventListener("hashchange",function(e){event.preventDefault(),checkHash(),hashUpdate()}),window.addEventListener("scroll",function(){null!==globalScrollTimer&&clearTimeout(globalScrollTimer),globalScrollUpdates++,globalScrollTimer=setTimeout(function(){if(1==globalScrollUpdates){var e=document.getElementsByTagName("*");for(i=0;i<e.length;i++){var t=e[i].getBoundingClientRect().top;0<=t&&t<=1&&hashUpdate()}}globalScrollUpdates=0},150)}),window.addEventListener("load",globalListenerLoadClearScroll),addFocusScrollListeners(document),function(){var e=document.getElementsByTagName("a");for(i=0;i<e.length;i++)""!=e[i].hash&&e[i].addEventListener("click",hashUpdate)}(),window.addEventListener("click",focusLock.handle),window.addEventListener("keydown",focusLock.handle)):setTimeout(execGlobalScripts,250)}execGlobalScripts(),window.addEventListener("load",function(){loadEventFired=!0,setTimeout(function(){var e;(e=document.getElementById("startup")).parentNode.removeChild(e),shiftUpdates.interval.check(!0),shiftUpdates.interval.set()},2500)});