var toasts={ready:!1,active:{},queue:{}};function toastTimeout(t,e){var o=t.id;"set"==e?(addClass(t,"expiring"),toasts.active[o].timeout=setTimeout(function(){toastTimeout(t,"expired")},toasts.active[o].duration)):(clearTimeout(toasts.active[o].timeout),"remove"==e?delClass(t,"expiring"):"expired"==e&&removeToast(t))}function newToast(t){var e,o,s,i,a={exception:{settings:{id:"exception",duration:"infinite"},content:{icon:"fas fa-exclamation-triangle",title:"An error has occurred"},action:{use:!0,type:"link",link:" ",name:"Refresh",label:"Refresh the page and try again"}}},n=(e=t.settings.template)&&"none"!==e&&void 0!==a[e]?a[e]:{},d=mergeObj({settings:{id:"toast",duration:"medium",template:"none"},content:{icon:"fas fa-bullhorn",title:"Toast",body:"This is a toast notification."},action:{use:!1,type:"link",link:"#",action:!1,close:!1,name:"Action",label:"The Action button"},close:{use:!0,type:"button",link:"#",action:!1,close:!0,name:"Dismiss",label:"Dismiss and close the toast"}},n,t),c=getTemplate("toast_template"),l={id:"toast_".concat(d.settings.id),duration:(o=d.settings.duration,s={short:2500,medium:5e3,long:7500},void 0!==s[o]?s[o]:o)},r={progress:getClass(getClass(c,"progress-bar"),"progress"),icon:getClass(c,"icon").childNodes[0],title:getClass(c,"title"),body:getClass(c,"body"),actions:getClass(c,"actions")},u=(document.getElementById("toast_list"),{title:"".concat(l.id,"_title"),body:"".concat(l.id,"_body")});function m(t,e){var o="button"==e.type?document.createElement("button"):document.createElement("a");return addClass(o,t),addClass(o,{button:"styled",link:"button"}[e.type]),o.innerHTML=e.name,updateLabel(o,e.label),"link"==e.type&&(o.href=e.link),e.action&&o.addEventListener("click",e.action),e.close&&(o.setAttribute("aria-controls",l.id),o.addEventListener("click",function(){removeToast(c)})),r.actions.appendChild(o),o}return c.id=l.id,r.progress.style.animationDuration="".concat(l.duration,"ms"),addClass(r.icon,d.content.icon),r.title.innerHTML=d.content.title,r.title.id=u.title,c.setAttribute("aria-labelledby",u.title),r.body.innerHTML=d.content.body,r.body.id=u.body,c.setAttribute("aria-describedby",u.body),d.action.use&&m("action",d.action),d.close.use&&m("close",d.close),"infinite"!=l.duration&&(c.addEventListener("mouseover",toastEvent),c.addEventListener("mouseout",toastEvent),c.addEventListener("click",toastEvent)),i=l.id,void 0===toasts.active[i]&&Object.keys(toasts.active).length<=3&&toasts.ready?(addToast(c,l),c):!toasts.queue[i]&&(toasts.queue[i]={toast:c,settings:l},c)}function addToast(t,e){var o=e.id;toasts.active[o]=e,document.getElementById("toast_list").appendChild(t),vishidden(t,!1),setTimeout(function(){"infinite"!=e.duration&&toastTimeout(t,"set")},200)}function removeToast(s){var i=document.getElementById("toast_list"),a=s.id;toasts.active[a];toastTimeout(s,"remove-timeout"),vishidden(s,!0),setTimeout(function(){var t=Object.keys(toasts.queue);if(i.removeChild(s),delete toasts.active[a],0<t.length){var e=t[0],o=toasts.queue[e];setTimeout(function(){addToast(o.toast,o.settings),delete toasts.queue[t[0]]},500)}},300)}function toastEvent(t){var e=t.type,o=t.currentTarget,s=hasClass(o,"expiring");"mouseover"==e||"click"==e?!0===s&&toastTimeout(o,"remove"):!1===s&&toastTimeout(o,"set")}window.addEventListener("load",function(){setTimeout(function(){var t,e=Object.keys(toasts.queue),o=3<=(t=e.length)?2:t-1;toasts.ready=!0;for(var s=o;0<=s;s--){var i=e[s],a=toasts.queue[i];addToast(a.toast,a.settings),delete toasts.queue[i]}},2500)});